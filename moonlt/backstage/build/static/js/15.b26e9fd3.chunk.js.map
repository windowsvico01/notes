{"version":3,"sources":["containers/Pages/Manage/Category/List/index.js","containers/Pages/Manage/Category/List/actions.js","containers/Pages/Manage/Category/List/selectors.js","utils/tools.js"],"names":["transCategoryData","data","console","log","finalData","forEach","item","pid","push","findChild","arr","finalChild","pNode","index","tChild","cNode","cid","length","children","getTitle","fields","isChild","name","value","List","props","_this","Object","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","handleUpdateCategory","editCid","state","formRef","current","validateFields","then","values","params","keys","key","updateCategory","addCategory","toggleModalVisible","bool","resetFields","fieldsChange","modalVisibleToggle","handleFilesChange","timer","clearTimeout","tTimer","setTimeout","setState","handleEditCategory","finalFields","handleAddChildCategory","React","createRef","editId","loadCategory","_this2","_this$props","category","modalVisible","label","getFieldValue","columns","title","dataIndex","width","render","t","record","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","_components_Style__WEBPACK_IMPORTED_MODULE_15__","antd__WEBPACK_IMPORTED_MODULE_10__","type","onClick","react_router_dom__WEBPACK_IMPORTED_MODULE_9__","to","concat","style","padding","layout","labelCol","span","wrapperCol","className","antd__WEBPACK_IMPORTED_MODULE_11__","size","dataSource","pagination","rowKey","antd__WEBPACK_IMPORTED_MODULE_12__","visible","onOk","onCancel","okText","cancelText","maskClosable","forceRender","antd__WEBPACK_IMPORTED_MODULE_13__","ref","onFieldsChange","_","all","initialValues","Item","assign","rules","required","message","antd__WEBPACK_IMPORTED_MODULE_14__","addonAfter","countNum","display","Component","connect","selectCategory","selectFields","selectModalVisible","selectEditCid","dispatch","bindActionCreators","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","actions","__webpack_require__","r","__webpack_exports__","d","ADD_CATEGORY","ADD_CATEGORY_SUCCESS","LOAD_CATEGORY","LOAD_CATEGORY_SUCCESS","ADD","FIELDS_CHANGE","MODAL_VISIBLE_TOGGLE","UPDATE_CATEGORY","add","addCategorySuccess","loadCategorySuccess","reselect__WEBPACK_IMPORTED_MODULE_0__","selectCategoryDomain","get","createSelector","subState","isNumber","str","count","re","i","len","test","c","charCodeAt"],"mappings":"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","file":"static/js/15.b26e9fd3.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Link } from 'react-router-dom';\nimport { Table, Button, Modal, Form, Input } from 'antd';\nimport { Title, Wrapper, FloatWrapper, FormOperate} from '@/components/Style';\nimport * as actions from './actions';\nimport { selectCategory, selectFields, selectModalVisible, selectEditCid } from './selectors';\nimport { countNum } from '@/utils/tools';\n// 递归树形结构\nconst transCategoryData = (data) => {\n  console.log(data);\n  const finalData = [];\n  const findChild = (arr) => {\n    const finalChild = arr;\n    arr.forEach((pNode, index) => {\n      const tChild = [];\n      data.forEach((cNode) => {\n        if (pNode.cid === cNode.pid) {\n          tChild.push(cNode);\n        }\n      })\n      if (tChild.length) {\n        findChild(tChild);\n        finalChild[index].children = tChild;\n      }\n    })\n    return finalChild\n  }\n  data.forEach((item) => {\n    if (item.pid === 0) {\n      finalData.push(item);\n    }\n  })\n  return findChild(finalData);\n}\n// 查看是否为添加子类目\nconst getTitle = (fields) => {\n  let isChild = '添加类目';\n  fields && fields.length && fields.forEach((item) => {\n    if (item.name && item.name[0] === 'pid' && item.value) isChild = '添加子类目';\n  })\n  return isChild;\n}\nclass List extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formRef: React.createRef(),\n      timer: '',\n      editId: '',\n    };\n  }\n  componentWillMount() {\n    this.props.loadCategory();\n  }\n  handleUpdateCategory = () => {\n    const { editCid } = this.props;\n    if (editCid) { // 编辑\n      this.state.formRef.current.validateFields().then(values => {\n        const params = { cid: editCid };\n        Object.keys(values).forEach((key) => {\n          params[key] = values[key];\n        })\n        this.props.updateCategory(params);\n      })\n    } else { // 添加\n      this.state.formRef.current.validateFields().then(values => {\n        const params = {};\n        Object.keys(values).forEach((key) => {\n          params[key] = values[key];\n        })\n        this.props.addCategory(params);\n      })\n    }\n    \n  }\n  toggleModalVisible = (bool) => {\n    if (!bool) {\n      this.state.formRef.current.resetFields();\n      this.props.fieldsChange([]); // 清空\n    }\n    this.props.modalVisibleToggle(bool);\n  }\n  handleFilesChange = (values) => {\n    if (this.state.timer) clearTimeout(this.state.timer);\n    const tTimer = setTimeout(() => {\n      this.props.fieldsChange(values);\n      this.setState({\n        timer: '',\n      })\n    }, 200)\n    this.setState({\n      timer: tTimer\n    })\n  }\n  handleEditCategory = (fields) => {\n    const finalFields = [];\n    Object.keys(fields).forEach((key) => {\n      if (key !== 'cid') {\n        finalFields.push({ name: [key], value: fields[key] });\n      }\n    })\n    this.props.fieldsChange(finalFields, fields.cid);\n    this.toggleModalVisible(true);\n  }\n  handleAddChildCategory = (pid) => {\n    const finalFields = [{ name: ['pid'], value: pid }];\n    this.props.fieldsChange(finalFields);\n    this.toggleModalVisible(true);\n  }\n  render() {\n    const { category, fields, modalVisible } = this.props;\n    const { formRef } = this.state;\n    const label = formRef && formRef.current && formRef.current.getFieldValue('label') || '';\n    const columns = [{\n      title: '类目名称',\n      dataIndex: 'name',\n      key: 'name',\n      width:400,\n    }, {\n      title: 'cid',\n      dataIndex: 'cid',\n      key: 'cid',\n    },  {\n      title: '操作',\n      key: 'operate',\n      render: (t, record) => (\n        <FormOperate>\n          <Button type=\"link\" onClick={() => this.handleEditCategory(record)}>编辑</Button>\n          <Link to={`/manage/category/detail/${record.cid}`} style={{ padding: '4px 15px' }}>详情</Link>\n          { record.pid * 1 === 0 && <Button type=\"link\" onClick={() => this.handleAddChildCategory(record.cid)}>添加子类目</Button>}\n        </FormOperate>\n      )\n    }];\n    const layout = {\n      labelCol: { span: 6 },\n      wrapperCol: { span: 16 },\n    }; \n    return (\n      <div>\n        <Title>\n          <div className=\"borderLeft\"></div>\n          <h2>类目管理</h2>\n          <Button type=\"primary\" className=\"btn-r\" onClick={() => this.toggleModalVisible(true)}>添加类目</Button>\n        </Title>\n        <Wrapper>\n          <Table columns={columns} size=\"middle\" dataSource={category && !!category.length && transCategoryData(category)} pagination={false} rowKey=\"cid\" />\n        </Wrapper>\n        <Modal\n          title={this.props.editCid ? '编辑类目' : getTitle(fields)}\n          visible={modalVisible}\n          width={500}\n          onOk={() => this.handleUpdateCategory()}\n          onCancel={() => this.toggleModalVisible(false)}\n          okText={this.props.editCid ? '确定' : '添加'}\n          cancelText=\"取消\"\n          maskClosable={false}\n          forceRender\n        >\n          <Form\n            ref={formRef}\n            onFieldsChange={(_, all) => this.handleFilesChange(all)}\n            fields={(fields && fields.length) ? fields : []}\n            initialValues={[]}\n          >\n            <Form.Item\n              {...layout}\n              label=\"名称\"\n              name=\"name\"\n              rules={[{ required: true, message: '请输入类目名称' }]}\n            >\n              <Input addonAfter={<div style={{ width: '50px' }}>{countNum(label)}个字</div>} />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"key\"\n              name=\"path_key\"\n              rules={[{ required: true, message: '请输入唯一key值' }]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"pid\"\n              name=\"pid\"\n              style={{ display: 'none' }}\n            >\n              <Input />\n            </Form.Item>\n          </Form>\n        </Modal>\n      </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    category: selectCategory(state),\n    fields: selectFields(state),\n    modalVisible: selectModalVisible(state),\n    editCid: selectEditCid(state),\n  };\n}\nconst mapActionsToProps = (dispatch) => bindActionCreators({ ...actions }, dispatch);\nexport default connect(mapStateToProps, mapActionsToProps)(List);\n","export const ADD_CATEGORY = '/Manage/Category/List/ADD_CATEGORY';\nexport const ADD_CATEGORY_SUCCESS = '/Manage/Category/List/ADD_CATEGORY_SUCCESS';\n\nexport const LOAD_CATEGORY = '/Manage/Category/List/LOAD_CATEGORY';\nexport const LOAD_CATEGORY_SUCCESS = '/Manage/Category/List/LOAD_CATEGORY_SUCCESS';\n\nexport const ADD = '/Manage/Category/List/ADD';\n\nexport const FIELDS_CHANGE = '/Manage/Category/List/FIELDS_CHANGE';\n\nexport const MODAL_VISIBLE_TOGGLE = '/Manage/Category/List/MODAL_VISIBLE_TOGGLE';\n\nexport const UPDATE_CATEGORY = '/Manage/Category/List/UPDATE_CATEGORY';\n\nexport function add(params) {\n  return {\n    type: ADD,\n    params,\n  };\n}\n\nexport function addCategory(params) {\n  return {\n    type: ADD_CATEGORY,\n    params,\n  };\n}\n\nexport function addCategorySuccess(data) {\n  return {\n    type: ADD_CATEGORY_SUCCESS,\n    data,\n  };\n}\n\nexport function loadCategory(params) {\n  return {\n    type: LOAD_CATEGORY,\n  };\n}\n\nexport function loadCategorySuccess(data) {\n  return {\n    type: LOAD_CATEGORY_SUCCESS,\n    data,\n  };\n}\n\nexport function fieldsChange(fields, editCid) {\n  return {\n    type: FIELDS_CHANGE,\n    fields,\n    editCid,\n  }\n}\n\nexport function modalVisibleToggle(bool, editCid) {\n  return {\n    type: MODAL_VISIBLE_TOGGLE,\n    bool,\n    editCid,\n  }\n}\n\nexport function updateCategory(params) {\n  return {\n    type: UPDATE_CATEGORY,\n    params,\n  }\n}\n\n","import { createSelector } from 'reselect';\n// state.get 是异步的\nconst selectCategoryDomain = state => state.get('Manage/Category/List');\nconst selectCategory = createSelector(\n  selectCategoryDomain,\n  (subState) => subState && subState.category,\n)\nconst selectFields = createSelector(\n  selectCategoryDomain,\n  (subState) => subState && subState.fields,\n)\nconst selectModalVisible = createSelector(\n  selectCategoryDomain,\n  (subState) => subState && subState.modalVisible,\n)\nconst selectEditCid = createSelector(\n  selectCategoryDomain,\n  (subState) => subState && subState.editCid,\n)\nexport {\n  selectCategory,\n  selectFields,\n  selectModalVisible,\n  selectEditCid,\n}","/**\n * @param str {string} 要计算的字符串，全角为1，半角为0.5\n */\nexport const countNum = (str) => {\n  let count = 0;\n  const re = /[\\u4e00-\\u9fa5]/;\n  const uFF61 = 0xFF61;\n  const uFF9F = 0xFF9F;\n  const uFFE8 = 0xFFE8;\n  const uFFEE = 0xFFEE;\n  if (str) {\n    for (let i = 0, len = str.length; i < len; i += 1) {\n      if (re.test(str[i])) {\n        count += 1;\n      } else {\n        const c = +str.charCodeAt(i);\n        if (c < 256) {\n          count += 0.5;\n        } else if ((uFF61 <= c) && (c <= uFF9F)) {\n          count += 0.5;\n        } else if ((uFFE8 <= c) && (c <= uFFEE)) {\n          count += 0.5;\n        } else {\n          count += 1;\n        }\n      }\n    } }\n  return count;\n}\n/**\n * @param str {string} 要分析的字符串\n */\nexport const isNumber = (str) => {\n  const regPos = /^\\d+(\\.\\d+)?$/; //非负浮点数\n  const regNeg = /^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/; //负浮点数\n  if (regPos.test(str) || regNeg.test(str)) return true;\n  else return false;\n}\n"],"sourceRoot":""}