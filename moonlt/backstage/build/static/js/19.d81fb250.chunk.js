(window.webpackJsonp=window.webpackJsonp||[]).push([[19,85,86],{101:function(e,t,n){"use strict";n.r(t);var r=n(56),a=n(134),i=n(393),o=n(139),u=n(55),c=n(135),l=n(0),d=n.n(l),s=n(37),f=n(24),m=n(38),p=n(65),g=n(681),y=n(136),b=n(239),h=n(268),C=(n(399),n(398)),O=n.n(C);function E(e){return function(){var t,n=Object(u.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=Object(u.a)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Object(o.a)(this,t)}}var L=function(e){Object(c.a)(n,e);var t=E(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleUpdateCategory=function(){var e=r.props.editCid;e?r.state.formRef.current.validateFields().then(function(t){var n={cid:e};Object.keys(t).forEach(function(e){n[e]=t[e]}),r.props.updateCategory(n)}):r.state.formRef.current.validateFields().then(function(e){var t={};Object.keys(e).forEach(function(n){t[n]=e[n]}),r.props.addCategory(t)})},r.toggleModalVisible=function(e){e||(r.state.formRef.current.resetFields(),r.props.fieldsChange([])),r.props.modalVisibleToggle(e)},r.handleFilesChange=function(e){r.state.timer&&clearTimeout(r.state.timer);var t=setTimeout(function(){r.props.fieldsChange(e),r.setState({timer:""})},200);r.setState({timer:t})},r.handleEditCategory=function(e){var t=[];Object.keys(e).forEach(function(n){"cid"!==n&&t.push({name:[n],value:e[n]})}),r.props.fieldsChange(t,e.cid),r.toggleModalVisible(!0)},r.handleAddChildCategory=function(e){var t=[{name:["pid"],value:e}];r.props.fieldsChange(t),r.toggleModalVisible(!0)},r.state={formRef:d.a.createRef(),timer:"",editId:""},r}return Object(i.a)(n,[{key:"componentWillMount",value:function(){this.props.loadForumList({})}},{key:"render",value:function(){var e=this,t=this.props.forumList;console.log(t);var n=this.state.formRef,r=(n&&n.current&&n.current.getFieldValue("label"),[{title:"\u677f\u5757fid",dataIndex:"fid",key:"fid"},{title:"\u677f\u5757\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u6240\u5c5e\u7c7b\u76ee",dataIndex:"category_name",key:"category_name"},{title:"\u5173\u6ce8\u4eba\u6570",dataIndex:"members",key:"members"},{title:"\u6587\u7ae0\u603b\u6570",dataIndex:"news_count",key:"news_count"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time",render:function(e){return d.a.createElement("span",null,e?O()(e).format("YYYY-MM-DD HH:mm:ss"):"--")}},{title:"\u64cd\u4f5c",key:"operate",render:function(t,n){return d.a.createElement(y.b,null,d.a.createElement(p.a,{type:"link",onClick:function(){return e.handleEditCategory(n)}},"\u7f16\u8f91"),d.a.createElement(m.b,{to:"/manage/category/detail/".concat(n.cid),style:{padding:"4px 15px"}},"\u8be6\u60c5"),1*n.pid===0&&d.a.createElement(p.a,{type:"link",onClick:function(){return e.handleAddChildCategory(n.cid)}},"\u6dfb\u52a0\u5b50\u7c7b\u76ee"))}}]);return d.a.createElement("div",null,d.a.createElement(y.f,null,d.a.createElement("div",{className:"borderLeft"}),d.a.createElement("h2",null,"\u677f\u5757\u7ba1\u7406"),d.a.createElement(m.b,{to:{pathname:"/manage/forum/add",state:{fid:"123"}}},d.a.createElement(p.a,{type:"primary",className:"btn-r"},"\u6dfb\u52a0\u677f\u5757"))),d.a.createElement(y.g,null,d.a.createElement(g.a,{columns:r,size:"middle",dataSource:t,pagination:!1,rowKey:"cid"})))}}]),n}(l.Component);t.default=Object(s.connect)(function(e){return{forumList:Object(h.selectForumList)(e),page:Object(h.selectPage)(e),total:Object(h.selectTotal)(e)}},function(e){return Object(f.bindActionCreators)(Object(r.a)({},b),e)})(L)},239:function(e,t,n){"use strict";n.r(t),n.d(t,"LOAD_FORUMLIST",function(){return r}),n.d(t,"LOAD_FORUMLIST_SUCCESS",function(){return a}),n.d(t,"ADD",function(){return i}),n.d(t,"FIELDS_CHANGE",function(){return o}),n.d(t,"MODAL_VISIBLE_TOGGLE",function(){return u}),n.d(t,"UPDATE_CATEGORY",function(){return c}),n.d(t,"add",function(){return l}),n.d(t,"loadForumList",function(){return d}),n.d(t,"loadForumListSuccess",function(){return s}),n.d(t,"fieldsChange",function(){return f}),n.d(t,"modalVisibleToggle",function(){return m}),n.d(t,"updateCategory",function(){return p});var r="/Manage/Forum/List/LOAD_FORUMLIST",a="/Manage/Forum/List/LOAD_FORUMLIST_SUCCESS",i="/Manage/Category/List/ADD",o="/Manage/Category/List/FIELDS_CHANGE",u="/Manage/Category/List/MODAL_VISIBLE_TOGGLE",c="/Manage/Category/List/UPDATE_CATEGORY";function l(e){return{type:i,params:e}}function d(e){return{type:r,params:e}}function s(e){return{type:a,data:e}}function f(e,t){return{type:o,fields:e,editCid:t}}function m(e,t){return{type:u,bool:e,editCid:t}}function p(e){return{type:c,params:e}}},268:function(e,t,n){"use strict";n.r(t),n.d(t,"selectForumList",function(){return i}),n.d(t,"selectPage",function(){return o}),n.d(t,"selectTotal",function(){return u});var r=n(44),a=function(e){return e.get("Manage/Forum/List")},i=Object(r.a)(a,function(e){return e&&e.forumList}),o=Object(r.a)(a,function(e){return e&&e.page}),u=Object(r.a)(a,function(e){return e&&e.total})},393:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return a})},399:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r=function(e){var t=0,n=/[\u4e00-\u9fa5]/;if(e)for(var r=0,a=e.length;r<a;r+=1)if(n.test(e[r]))t+=1;else{var i=+e.charCodeAt(r);t+=i<256?.5:65377<=i&&i<=65439?.5:65512<=i&&i<=65518?.5:1}return t},a=function(e){return!(!/^\d+(\.\d+)?$/.test(e)&&!/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e))}}}]);
//# sourceMappingURL=19.d81fb250.chunk.js.map