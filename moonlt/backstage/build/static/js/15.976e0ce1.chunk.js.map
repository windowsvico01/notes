{"version":3,"sources":["containers/Pages/Permission/Menu/index.js","containers/Pages/Permission/Menu/actions.js","containers/Pages/Permission/Menu/selectors.js","utils/tools.js"],"names":["transMenuData","data","finalData","forEach","item","pid","push","findChild","arr","finalChild","pNode","index","tChild","cNode","id","length","children","getTitle","fields","isChild","name","value","Menu","props","_this","Object","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","handleUpdateMenu","editId","state","formRef","current","validateFields","then","values","params","keys","key","updateMenu","addMenu","toggleModalVisible","bool","resetFields","fieldsChange","modalVisibleToggle","handleFilesChange","timer","clearTimeout","tTimer","setTimeout","setState","handleEditMenu","finalFields","handleAddChildMenu","handleChangeMenuShow","show_side","React","createRef","loadMenu","menu_ids","_this2","_this$props","menus","modalVisible","label","getFieldValue","columns","title","dataIndex","width","render","t","record","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","antd__WEBPACK_IMPORTED_MODULE_9__","type","size","shape","onClick","danger","_components_Style__WEBPACK_IMPORTED_MODULE_14__","layout","labelCol","span","wrapperCol","className","antd__WEBPACK_IMPORTED_MODULE_10__","dataSource","rowKey","antd__WEBPACK_IMPORTED_MODULE_11__","visible","onOk","onCancel","okText","cancelText","maskClosable","forceRender","antd__WEBPACK_IMPORTED_MODULE_12__","ref","onFieldsChange","_","all","initialValues","Item","assign","rules","required","message","antd__WEBPACK_IMPORTED_MODULE_13__","addonAfter","style","countNum","display","Component","connect","selectMenus","selectFields","selectModalVisible","selectEditId","dispatch","bindActionCreators","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","actions","__webpack_require__","r","__webpack_exports__","d","ADD_MENU","ADD_MENU_SUCCESS","LOAD_MENU","LOAD_MENU_SUCCESS","ADD","FIELDS_CHANGE","MODAL_VISIBLE_TOGGLE","UPDATE_MENU","add","addMenuSuccess","loadMenuSuccess","reselect__WEBPACK_IMPORTED_MODULE_0__","selectOverViewDomain","get","createSelector","subState","isNumber","str","count","re","i","len","test","c","charCodeAt"],"mappings":"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","file":"static/js/15.976e0ce1.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Table, Button, Modal, Form, Input } from 'antd';\nimport { Title, Wrapper, FloatWrapper, FormOperate} from '@/components/Style';\nimport * as actions from './actions';\nimport { selectMenus, selectFields, selectModalVisible, selectEditId } from './selectors';\nimport { countNum } from '@/utils/tools';\n// 递归树形结构\nconst transMenuData = (data) => {\n  const finalData = [];\n  const findChild = (arr) => {\n    const finalChild = arr;\n    arr.forEach((pNode, index) => {\n      const tChild = [];\n      data.forEach((cNode) => {\n        if (pNode.id === cNode.pid) {\n          tChild.push(cNode);\n        }\n      })\n      if (tChild.length) {\n        findChild(tChild);\n        finalChild[index].children = tChild;\n      }\n    })\n    return finalChild\n  }\n  data.forEach((item) => {\n    if (item.pid === 0) {\n      finalData.push(item);\n    }\n  })\n  return findChild(finalData);\n}\n// 查看是否为添加子菜单\nconst getTitle = (fields) => {\n  let isChild = '添加菜单';\n  fields && fields.length && fields.forEach((item) => {\n    if (item.name && item.name[0] === 'pid' && item.value) isChild = '添加子菜单';\n  })\n  return isChild;\n}\nclass Menu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formRef: React.createRef(),\n      timer: '',\n      editId: '',\n    };\n  }\n  componentWillMount() {\n    this.props.loadMenu({ menu_ids: 'all' });\n  }\n  handleUpdateMenu = () => {\n    const { editId } = this.props;\n    if (editId) { // 编辑\n      this.state.formRef.current.validateFields().then(values => {\n        const params = { id: editId };\n        Object.keys(values).forEach((key) => {\n          params[key] = values[key];\n        })\n        this.props.updateMenu(params);\n      })\n    } else { // 添加\n      this.state.formRef.current.validateFields().then(values => {\n        const params = {};\n        Object.keys(values).forEach((key) => {\n          params[key] = values[key];\n        })\n        this.props.addMenu(params);\n      })\n    }\n    \n  }\n  toggleModalVisible = (bool) => {\n    if (!bool) {\n      this.state.formRef.current.resetFields();\n      this.props.fieldsChange([]); // 清空\n    }\n    this.props.modalVisibleToggle(bool);\n  }\n  handleFilesChange = (values) => {\n    if (this.state.timer) clearTimeout(this.state.timer);\n    const tTimer = setTimeout(() => {\n      this.props.fieldsChange(values);\n      this.setState({\n        timer: '',\n      })\n    }, 200)\n    this.setState({\n      timer: tTimer\n    })\n  }\n  handleEditMenu = (fields) => {\n    const finalFields = [];\n    Object.keys(fields).forEach((key) => {\n      if (key !== 'id') {\n        finalFields.push({ name: [key], value: fields[key] });\n      }\n    })\n    this.props.fieldsChange(finalFields, fields.id);\n    this.toggleModalVisible(true);\n  }\n  handleAddChildMenu = (pid) => {\n    const finalFields = [{ name: ['pid'], value: pid }];\n    this.props.fieldsChange(finalFields);\n    this.toggleModalVisible(true);\n  }\n  handleChangeMenuShow = (id, value) => {\n    const params = { id, show_side: value };\n    this.props.updateMenu(params);\n  }\n  render() {\n    const { menus, fields, modalVisible } = this.props;\n    const { formRef } = this.state;\n    const label = formRef && formRef.current && formRef.current.getFieldValue('label') || '';\n    const columns = [{\n      title: '名称',\n      dataIndex: 'label',\n      key: 'label',\n      width:400,\n    }, {\n      title: 'id',\n      dataIndex: 'id',\n      key: 'id',\n    }, {\n      title: '路径',\n      dataIndex: 'path',\n      key: 'path',\n    }, {\n      title: '菜单中显示',\n      dataIndex: 'show_side',\n      key: 'show_side',\n      render: (t, record) => <span>\n      {t === '1' ?\n        <Button type=\"primary\" size=\"small\" shape=\"round\" onClick={() => this.handleChangeMenuShow(record.id, '0')}>显示</Button> :\n        <Button type=\"primary\" danger size=\"small\" shape=\"round\" onClick={() => this.handleChangeMenuShow(record.id, '1')}>隐藏</Button>}\n      </span>,\n    }, {\n      title: '操作',\n      key: 'operate',\n      render: (t, record) => (\n        <FormOperate>\n          <Button type=\"link\" onClick={() => this.handleAddChildMenu(record.id)}>添加子菜单</Button>\n          <Button type=\"link\" onClick={() => this.handleEditMenu(record)}>编辑</Button>\n        </FormOperate>\n      )\n    }];\n    const layout = {\n      labelCol: { span: 6 },\n      wrapperCol: { span: 16 },\n    }; \n    return (\n      <div>\n        <Title>\n          <div className=\"borderLeft\"></div>\n          <h2>菜单管理</h2>\n          <Button type=\"primary\" className=\"btn-r\" onClick={() => this.toggleModalVisible(true)}>添加菜单</Button>\n        </Title>\n        <Wrapper>\n          <Table columns={columns} size=\"middle\" dataSource={menus && !!menus.length && transMenuData(menus)} rowKey=\"route\" />\n        </Wrapper>\n        <Modal\n          title={this.props.editId ? '编辑菜单' : getTitle(fields)}\n          visible={modalVisible}\n          width={500}\n          onOk={() => this.handleUpdateMenu()}\n          onCancel={() => this.toggleModalVisible(false)}\n          okText={this.props.editId ? '确定' : '添加'}\n          cancelText=\"取消\"\n          maskClosable={false}\n          forceRender\n        >\n          <Form\n            ref={formRef}\n            onFieldsChange={(_, all) => this.handleFilesChange(all)}\n            fields={(fields && fields.length) ? fields : []}\n            initialValues={[]}\n          >\n            <Form.Item\n              {...layout}\n              label=\"名称\"\n              name=\"label\"\n              rules={[{ required: true, message: '请输入菜单名称' }]}\n            >\n              <Input addonAfter={<div style={{ width: '50px' }}>{countNum(label)}个字</div>} />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"唯一标识\"\n              name=\"menu_key\"\n              rules={[{ required: true, message: '请输入唯一标识' }]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"路径\"\n              name=\"path\"\n              rules={[{ required: true, message: '请输入路径' }]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"图标\"\n              name=\"icon\"\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"Route\"\n              name=\"route\"\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"排序\"\n              name=\"sort_num\"\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"pid\"\n              name=\"pid\"\n              style={{ display: 'none' }}\n            >\n              <Input />\n            </Form.Item>\n          </Form>\n        </Modal>\n      </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    menus: selectMenus(state),\n    fields: selectFields(state),\n    modalVisible: selectModalVisible(state),\n    editId: selectEditId(state),\n  };\n}\nconst mapActionsToProps = (dispatch) => bindActionCreators({ ...actions }, dispatch);\nexport default connect(mapStateToProps, mapActionsToProps)(Menu);\n","export const ADD_MENU = '/Permission/Menu/ADD_MENU';\nexport const ADD_MENU_SUCCESS = '/Permission/Menu/ADD_MENU_SUCCESS';\n\nexport const LOAD_MENU = '/Permission/Menu/LOAD_MENU';\nexport const LOAD_MENU_SUCCESS = '/Permission/Menu/LOAD_MENU_SUCCESS';\n\nexport const ADD = '/Permission/Menu/ADD';\n\nexport const FIELDS_CHANGE = '/Permission/Menu/FIELDS_CHANGE';\n\nexport const MODAL_VISIBLE_TOGGLE = '/Permission/Menu/MODAL_VISIBLE_TOGGLE';\n\nexport const UPDATE_MENU = '/Permission/Menu/UPDATE_MENU';\n\nexport function add(params) {\n  return {\n    type: ADD,\n    params,\n  };\n}\n\nexport function addMenu(params) {\n  return {\n    type: ADD_MENU,\n    params,\n  };\n}\n\nexport function addMenuSuccess(data) {\n  return {\n    type: ADD_MENU_SUCCESS,\n    data,\n  };\n}\n\nexport function loadMenu(params) {\n  return {\n    type: LOAD_MENU,\n    params,\n  };\n}\n\nexport function loadMenuSuccess(data) {\n  return {\n    type: LOAD_MENU_SUCCESS,\n    data,\n  };\n}\n\nexport function fieldsChange(fields, editId) {\n  return {\n    type: FIELDS_CHANGE,\n    fields,\n    editId,\n  }\n}\n\nexport function modalVisibleToggle(bool, editId) {\n  return {\n    type: MODAL_VISIBLE_TOGGLE,\n    bool,\n    editId,\n  }\n}\n\nexport function updateMenu(params) {\n  return {\n    type: UPDATE_MENU,\n    params,\n  }\n}\n\n","import { createSelector } from 'reselect';\n// state.get 是异步的\nconst selectOverViewDomain = state => state.get('Permission/Menu');\nconst selectMenus = createSelector(\n  selectOverViewDomain,\n  (subState) => subState && subState.menus,\n)\nconst selectFields = createSelector(\n  selectOverViewDomain,\n  (subState) => subState && subState.fields,\n)\nconst selectModalVisible = createSelector(\n  selectOverViewDomain,\n  (subState) => subState && subState.modalVisible,\n)\nconst selectEditId = createSelector(\n  selectOverViewDomain,\n  (subState) => subState && subState.editId,\n)\nexport {\n  selectMenus,\n  selectFields,\n  selectModalVisible,\n  selectEditId,\n}","/**\n * @param str {string} 要计算的字符串，全角为1，半角为0.5\n */\nexport const countNum = (str) => {\n  let count = 0;\n  const re = /[\\u4e00-\\u9fa5]/;\n  const uFF61 = 0xFF61;\n  const uFF9F = 0xFF9F;\n  const uFFE8 = 0xFFE8;\n  const uFFEE = 0xFFEE;\n  if (str) {\n    for (let i = 0, len = str.length; i < len; i += 1) {\n      if (re.test(str[i])) {\n        count += 1;\n      } else {\n        const c = +str.charCodeAt(i);\n        if (c < 256) {\n          count += 0.5;\n        } else if ((uFF61 <= c) && (c <= uFF9F)) {\n          count += 0.5;\n        } else if ((uFFE8 <= c) && (c <= uFFEE)) {\n          count += 0.5;\n        } else {\n          count += 1;\n        }\n      }\n    } }\n  return count;\n}\n/**\n * @param str {string} 要分析的字符串\n */\nexport const isNumber = (str) => {\n  const regPos = /^\\d+(\\.\\d+)?$/; //非负浮点数\n  const regNeg = /^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/; //负浮点数\n  if (regPos.test(str) || regNeg.test(str)) return true;\n  else return false;\n}\n"],"sourceRoot":""}