(window.webpackJsonp=window.webpackJsonp||[]).push([[6,45,46],{105:function(e,n,t){"use strict";t.r(n);var r=t(14),a=t(21),i=t(36),u=t(23),l=t(15),c=t(22),o=t(0),d=t.n(o),s=t(39),f=t(29),m=t(80),p=t(552),h=t(554),b=t(553),E=t(556),v=t(364),g=t(205),O=t(216),M=function(e){var n=0,t=/[\u4e00-\u9fa5]/;if(e)for(var r=0,a=e.length;r<a;r+=1)if(t.test(e[r]))n+=1;else{var i=+e.charCodeAt(r);n+=i<256?.5:65377<=i&&i<=65439?.5:65512<=i&&i<=65518?.5:1}return n},j=function(e){var n=[];return e.forEach(function(e){0===e.pid&&n.push(e)}),function n(t){var r=t;return t.forEach(function(t,a){var i=[];e.forEach(function(e){t.id===e.pid&&"1"===e.show_side&&i.push(e)}),i.length&&(n(i),r[a].children=i)}),r}(n)},w=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(u.a)(this,Object(l.a)(n).call(this,e))).handleUpdateMenu=function(){var e=t.props.editId;e?t.state.formRef.current.validateFields().then(function(n){var r={id:e};Object.keys(n).forEach(function(e){r[e]=n[e]}),t.props.updateMenu(r)}):t.state.formRef.current.validateFields().then(function(e){var n={};Object.keys(e).forEach(function(t){n[t]=e[t]}),t.props.addMenu(n)})},t.toggleModalVisible=function(e){e||(t.state.formRef.current.resetFields(),t.props.fieldsChange([])),t.props.modalVisibleToggle(e)},t.handleFilesChange=function(e){t.state.timer&&clearTimeout(t.state.timer);var n=setTimeout(function(){t.props.fieldsChange(e),t.setState({timer:""})},200);t.setState({timer:n})},t.handleEditMenu=function(e){var n=[];Object.keys(e).forEach(function(t){"id"!==t&&n.push({name:[t],value:e[t]})}),t.props.fieldsChange(n,e.id),t.toggleModalVisible(!0)},t.state={formRef:d.a.createRef(),timer:"",editId:""},t}return Object(c.a)(n,e),Object(i.a)(n,[{key:"componentWillMount",value:function(){this.props.loadMenu({menu_ids:"all"})}},{key:"render",value:function(){var e=this,n=this.props,t=n.menus,r=n.fields,a=n.modalVisible,i=this.state.formRef,u=i&&i.current&&i.current.getFieldValue("label")||"",l=[{title:"\u540d\u79f0",dataIndex:"label",key:"label",width:400},{title:"id",dataIndex:"id",key:"id"},{title:"\u8def\u5f84",dataIndex:"path",key:"path"},{title:"\u83dc\u5355\u4e2d\u663e\u793a",dataIndex:"show_side",key:"show_side",render:function(e){return d.a.createElement("span",null,"1"===e?"\u663e\u793a":"\u9690\u85cf")}},{title:"\u64cd\u4f5c",key:"operate",render:function(n,t){return d.a.createElement(v.b,null,d.a.createElement("a",{onClick:function(){return e.handleEditMenu(t)}},"\u7f16\u8f91"))}}],c={labelCol:{span:6},wrapperCol:{span:16}};return d.a.createElement("div",null,d.a.createElement(v.c,null,d.a.createElement("div",{className:"borderLeft"}),d.a.createElement("h2",null,"\u83dc\u5355\u7ba1\u7406")),d.a.createElement(v.a,null,d.a.createElement(m.a,{className:"f-r",type:"primary",onClick:function(){return e.toggleModalVisible(!0)}},this.props.editId?"\u7f16\u8f91\u83dc\u5355":"\u6dfb\u52a0\u83dc\u5355")),d.a.createElement(v.d,null,d.a.createElement(p.a,{columns:l,dataSource:t&&!!t.length&&j(t),rowKey:"route"})),d.a.createElement(h.a,{title:"\u6dfb\u52a0\u83dc\u5355",visible:a,width:500,onOk:function(){return e.handleUpdateMenu()},onCancel:function(){return e.toggleModalVisible(!1)},okText:this.props.editId?"\u786e\u5b9a":"\u6dfb\u52a0",cancelText:"\u53d6\u6d88",maskClosable:!1,forceRender:!0},d.a.createElement(b.a,{ref:i,onFieldsChange:function(n,t){return e.handleFilesChange(t)},fields:r&&r.length?r:[],initialValues:[]},d.a.createElement(b.a.Item,Object.assign({},c,{label:"\u540d\u79f0",name:"label",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u83dc\u5355\u540d\u79f0"}]}),d.a.createElement(E.a,{addonAfter:d.a.createElement("div",{style:{width:"50px"}},M(u),"\u4e2a\u5b57")})),d.a.createElement(b.a.Item,Object.assign({},c,{label:"\u7236\u7ea7\u83dc\u5355ID",name:"pid",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7236\u7ea7\u83dc\u5355ID"}]}),d.a.createElement(E.a,null)),d.a.createElement(b.a.Item,Object.assign({},c,{label:"\u552f\u4e00\u6807\u8bc6",name:"menu_key",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u552f\u4e00\u6807\u8bc6"}]}),d.a.createElement(E.a,null)),d.a.createElement(b.a.Item,Object.assign({},c,{label:"\u8def\u5f84",name:"path",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8def\u5f84"}]}),d.a.createElement(E.a,null)),d.a.createElement(b.a.Item,Object.assign({},c,{label:"\u56fe\u6807",name:"icon"}),d.a.createElement(E.a,null)),d.a.createElement(b.a.Item,Object.assign({},c,{label:"Route",name:"route"}),d.a.createElement(E.a,null)),d.a.createElement(b.a.Item,Object.assign({},c,{label:"\u6392\u5e8f",name:"sort_num"}),d.a.createElement(E.a,null)))))}}]),n}(o.Component);n.default=Object(s.connect)(function(e){return{menus:Object(O.selectMenus)(e),fields:Object(O.selectFields)(e),modalVisible:Object(O.selectModalVisible)(e),editId:Object(O.selectEditId)(e)}},function(e){return Object(f.bindActionCreators)(Object(r.a)({},g),e)})(w)},205:function(e,n,t){"use strict";t.r(n),t.d(n,"ADD_MENU",function(){return r}),t.d(n,"ADD_MENU_SUCCESS",function(){return a}),t.d(n,"LOAD_MENU",function(){return i}),t.d(n,"LOAD_MENU_SUCCESS",function(){return u}),t.d(n,"ADD",function(){return l}),t.d(n,"FIELDS_CHANGE",function(){return c}),t.d(n,"MODAL_VISIBLE_TOGGLE",function(){return o}),t.d(n,"UPDATE_MENU",function(){return d}),t.d(n,"add",function(){return s}),t.d(n,"addMenu",function(){return f}),t.d(n,"addMenuSuccess",function(){return m}),t.d(n,"loadMenu",function(){return p}),t.d(n,"loadMenuSuccess",function(){return h}),t.d(n,"fieldsChange",function(){return b}),t.d(n,"modalVisibleToggle",function(){return E}),t.d(n,"updateMenu",function(){return v});var r="/Menu/Overview/ADD_MENU",a="/Menu/Overview/ADD_MENU_SUCCESS",i="/Menu/Overview/LOAD_MENU",u="/Menu/Overview/LOAD_MENU_SUCCESS",l="/Menu/Overview/ADD",c="/Menu/Overview/FIELDS_CHANGE",o="/Menu/Overview/MODAL_VISIBLE_TOGGLE",d="/Menu/Overview/UPDATE_MENU";function s(e){return{type:l,params:e}}function f(e){return{type:r,params:e}}function m(e){return{type:a,data:e}}function p(e){return{type:i,params:e}}function h(e){return{type:u,data:e}}function b(e,n){return{type:c,fields:e,editId:n}}function E(e,n){return{type:o,bool:e,editId:n}}function v(e){return{type:d,params:e}}},216:function(e,n,t){"use strict";t.r(n),t.d(n,"selectMenus",function(){return i}),t.d(n,"selectFields",function(){return u}),t.d(n,"selectModalVisible",function(){return l}),t.d(n,"selectEditId",function(){return c});var r=t(51),a=function(e){return e.get("Menu/Overview")},i=Object(r.a)(a,function(e){return e&&e.menus}),u=Object(r.a)(a,function(e){return e&&e.fields}),l=Object(r.a)(a,function(e){return e&&e.modalVisible}),c=Object(r.a)(a,function(e){return e&&e.editId})},364:function(e,n,t){"use strict";t.d(n,"d",function(){return o}),t.d(n,"a",function(){return d}),t.d(n,"c",function(){return s}),t.d(n,"b",function(){return f});var r=t(16),a=t(17);function i(){var e=Object(r.a)(["\n  overflow: hidden;\n  a {\n    margin-right: 10px;\n  }\n"]);return i=function(){return e},e}function u(){var e=Object(r.a)(["\n  width: 100%;\n  overflow: hidden;\n  height: 20px;\n  margin-bottom: 15px;\n  .borderLeft {\n    width: 3px;\n    height: 20px;\n    background: #91d5ff;\n    float: left;\n  }\n  h2 {\n    font-size: 18px;\n    float: left;\n    margin: 0 0 0 10px;\n    height: 20px;\n    line-height: 20px;\n  }\n"]);return u=function(){return e},e}function l(){var e=Object(r.a)(["\n  width: 100%;\n  height: auto;\n  padding-right: 24px;\n  overflow: hidden;\n  margin-bottom: 15px;\n  .f-l {\n    float: left;\n  }\n  .f-r {\n    float: right;\n  }\n"]);return l=function(){return e},e}function c(){var e=Object(r.a)(["\n  width: 100%;\n  height: auto;\n  padding-right: 24px;\n  margin-bottom: 15px;\n"]);return c=function(){return e},e}var o=a.a.div(c()),d=a.a.div(l()),s=a.a.div(u()),f=a.a.div(i())}}]);
//# sourceMappingURL=6.edd038b8.chunk.js.map