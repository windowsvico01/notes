(window.webpackJsonp=window.webpackJsonp||[]).push([[13,58,59],{100:function(e,t,n){"use strict";n.r(t);var a=n(18),r=n(28),o=n(38),c=n(30),l=n(19),i=n(29),u=n(9),s=n(0),f=n.n(s),d=n(42),m=n(32),p=n(461),h=n(624),b=n(483),E=n(84),C=n(621),O=n(623),g=n(211),v=n(148),y=n(10),A=n(233),j=n(247),L=(n(406),n(433));function D(){var e=Object(u.a)(["\n  button{\n    margin-right: 15px;\n  }\n"]);return D=function(){return e},e}var S=p.a.TabPane,k=h.a.TextArea,P=b.a.Option,T=y.a.div(D()),_=function(e){var t=[];return e.forEach(function(e){0===e.pid&&(e.title=e.name,e.value=e.cid,e.key=e.cid,t.push(e))}),function t(n){var a=n;return n.forEach(function(n,r){var o=[];e.forEach(function(e){n.cid===e.pid&&(e.title=e.name,e.value=e.cid,e.key=e.cid,o.push(e))}),o.length&&(t(o),a[r].children=o)}),a}(t)},w=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).handleLoadPlate=function(e){var t={cid:e};n.state.formRef.current.setFieldsValue({plate:[]}),n.props.loadPlate(t)},n.handleFilesChange=function(e){n.state.timer&&clearTimeout(n.state.timer);var t=setTimeout(function(){n.props.fieldsChange(e),n.setState({timer:""})},200);n.setState({timer:t})},n.handlePublish=function(){n.state.formRef.current.validateFields().then(function(e){var t={};Object.keys(e).forEach(function(n){"plate"===n?t.plate=e.plate.join(","):t[n]=e[n]}),t.type="1",n.props.publishDraft(t)})},n.state={formRef:f.a.createRef()},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.loadCategory()}},{key:"render",value:function(){var e=this,t=this.props,n=t.categoryList,a=t.plateList,r=t.fields,o=this.state.formRef,c={labelCol:{span:2},wrapperCol:{span:22}},l={labelCol:{span:4},wrapperCol:{span:20}},i=f.a.createElement(T,null,f.a.createElement(E.a,null," \u4fdd\u5b58\u8349\u7a3f "),f.a.createElement(E.a,{type:"primary",onClick:this.handlePublish}," \u53d1\u5e03 "));return f.a.createElement("div",null,f.a.createElement(v.f,null,f.a.createElement(E.a,{style:{float:"left"},icon:f.a.createElement(g.a,null),onClick:function(){return e.props.history.goBack()}}),f.a.createElement("h2",null,"\u6dfb\u52a0\u7a3f\u4ef6")),f.a.createElement(v.g,{style:{minWidth:"950px"}},f.a.createElement(p.a,{defaultActiveKey:"1",type:"card",tabBarExtraContent:i},f.a.createElement(S,{tab:"\u6587\u7ae0",key:"1"},f.a.createElement(C.a,{ref:o,onFieldsChange:function(t,n){return e.handleFilesChange(n)},fields:r&&r.length?r:[],initialValues:[]},f.a.createElement(v.d,null,f.a.createElement(C.a.Item,Object.assign({},l,{label:"\u7c7b\u76ee",name:"cid"}),f.a.createElement(O.a,{dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:_(n),placeholder:"\u8bf7\u9009\u62e9\u7c7b\u76ee",onChange:this.handleLoadPlate,treeDefaultExpandAll:!0})),f.a.createElement(C.a.Item,Object.assign({},l,{label:"\u677f\u5757",name:"plate"}),f.a.createElement(b.a,{mode:"tags",placeholder:"\u8bf7\u9009\u62e9\u677f\u5757",defaultValue:[]},a&&!!a.length&&a.map(function(e){return f.a.createElement(P,{key:e.id},e.name)})))),f.a.createElement(v.c,null,f.a.createElement(C.a.Item,Object.assign({},c,{label:"\u6807\u9898",name:"title"}),f.a.createElement(h.a,null)),f.a.createElement(C.a.Item,Object.assign({},c,{label:"\u7b80\u4ecb",name:"summary"}),f.a.createElement(k,{rows:4})),f.a.createElement(C.a.Item,Object.assign({},c,{label:"\u6b63\u6587",name:"content"}),f.a.createElement(L.a,{defaultValue:""}))))),f.a.createElement(S,{tab:"\u56fe\u96c6",key:"2"},"Content of Tab Pane 2"),f.a.createElement(S,{tab:"\u89c6\u9891",key:"3"},"Content of Tab Pane 2"))))}}]),t}(s.Component);t.default=Object(d.connect)(function(e){return{fields:Object(j.selectFields)(e),categoryList:Object(j.selectCategoryList)(e),plateList:Object(j.selectPlateList)(e)}},function(e){return Object(m.bindActionCreators)(Object(a.a)({},A),e)})(w)},233:function(e,t,n){"use strict";n.r(t),n.d(t,"LOAD_CATEGORY",function(){return a}),n.d(t,"LOAD_CATEGORY_SUCCESS",function(){return r}),n.d(t,"LOAD_PLATE",function(){return o}),n.d(t,"LOAD_PLATE_SUCCESS",function(){return c}),n.d(t,"FIELDS_CHANGE",function(){return l}),n.d(t,"PUBLISH_DRAFT",function(){return i}),n.d(t,"loadCategory",function(){return u}),n.d(t,"loadCategorySuccess",function(){return s}),n.d(t,"loadPlate",function(){return f}),n.d(t,"loadPlateSuccess",function(){return d}),n.d(t,"fieldsChange",function(){return m}),n.d(t,"publishDraft",function(){return p});var a="/Draft/Add/LOAD_CATEGORY",r="/Draft/Add/LOAD_CATEGORY_SUCCESS",o="/Draft/Add/LOAD_PLATE",c="/Draft/Add/LOAD_PLATE_SUCCESS",l="/Draft/Add/FIELDS_CHANGE",i="/Draft/Add/PUBLISH_DRAFT";function u(e){return{type:a}}function s(e){return{type:r,data:e}}function f(e){return{type:o,params:e}}function d(e){return{type:c,data:e}}function m(e){return{type:l,fields:e}}function p(e){return{type:i,params:e}}},247:function(e,t,n){"use strict";n.r(t),n.d(t,"selectCategoryList",function(){return l}),n.d(t,"selectPlateList",function(){return o}),n.d(t,"selectFields",function(){return c});var a=n(50),r=function(e){return e.get("Draft/Add")},o=Object(a.a)(r,function(e){return e&&e.plateList}),c=Object(a.a)(r,function(e){return e&&e.fields}),l=Object(a.a)(r,function(e){return e&&e.categoryList})},406:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var a=function(e){var t=0,n=/[\u4e00-\u9fa5]/;if(e)for(var a=0,r=e.length;a<r;a+=1)if(n.test(e[a]))t+=1;else{var o=+e.charCodeAt(a);t+=o<256?.5:65377<=o&&o<=65439?.5:65512<=o&&o<=65518?.5:1}return t},r=function(e){return!(!/^\d+(\.\d+)?$/.test(e)&&!/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e))}},433:function(e,t,n){"use strict";var a=n(28),r=n(38),o=n(30),c=n(19),l=n(29),i=n(9),u=n(0),s=n.n(u),f=n(469),d=n.n(f),m=n(10);function p(){var e=Object(i.a)(["\n  border: 1px solid #ccc;\n  height: 300px;\n  overflow: scroll;\n"]);return p=function(){return e},e}function h(){var e=Object(i.a)(["\n  height: 30px;\n"]);return h=function(){return e},e}function b(){var e=Object(i.a)(["\n  border: 1px solid #ccc;\n"]);return b=function(){return e},e}var E=m.a.div(b()),C=m.a.div(h()),O=m.a.div(p()),g=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={editorContent:""},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.refs.editorElem,n=this.refs.toolDefElem,a=new d.a(n,t);a.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","table","code","undo","redo"],a.customConfig.onchange=function(t){e.setState({editorContent:t}),console.log(e.props.onChange),e.props.onChange&&e.props.onChange(t)},a.create(),a.txt.html(this.props.defaultValue||"")}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(E,{id:"toolDef",ref:"toolDefElem"}),s.a.createElement(C,{id:"toolCus"}),s.a.createElement(O,{ref:"editorElem"}))}}]),t}(s.a.PureComponent);t.a=g}}]);
//# sourceMappingURL=13.9318efcd.chunk.js.map