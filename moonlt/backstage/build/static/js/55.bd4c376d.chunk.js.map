{"version":3,"sources":["containers/Pages/Permission/Menu/sagas.js","containers/Pages/Permission/Menu/actions.js"],"names":["handleAddMenu","handleLoadMenu","handleUpdateMenu","watcher","action","params","formData","options","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","FormData","Object","keys","forEach","key","undefined","append","method","body","call","fetchData","url","sent","put","loadMenu","menu_ids","modalVisibleToggle","stop","_marked","result","_context2","loadMenuSuccess","_marked2","_context3","loadUserInfo","_marked3","_context4","takeLatest","ADD_MENU","LOAD_MENU","UPDATE_MENU","_marked4","__webpack_exports__","__webpack_require__","r","d","ADD_MENU_SUCCESS","LOAD_MENU_SUCCESS","ADD","FIELDS_CHANGE","MODAL_VISIBLE_TOGGLE","add","addMenu","addMenuSuccess","fieldsChange","updateMenu","type","data","fields","editId","bool"],"mappings":"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","file":"static/js/55.bd4c376d.chunk.js","sourcesContent":["import { fork, call, put, takeLatest, takeEvery } from 'redux-saga/effects';\nimport fetchData from '@/containers/App/sagas/fetchData';\nimport { loadUserInfo } from '@/containers/App/actions';\nimport { ADD_MENU, modalVisibleToggle, LOAD_MENU, loadMenuSuccess, loadMenu, UPDATE_MENU, fieldsChange } from './actions';\nexport function* handleAddMenu(action) {\n  const { params } = action;\n  const formData = new FormData();\n  Object.keys(params).forEach((key) => {\n    if (params[key] === undefined) return;\n    formData.append(key, params[key]);\n  })\n  const options = {\n    method: 'POST',\n    body: formData,\n  }\n  const result = yield call(fetchData, { url: '/user/addMenu', options });\n  if (result) {\n    yield put(loadMenu({ menu_ids: 'all' }));\n    yield put(modalVisibleToggle(false));\n  }\n}\nexport function* handleLoadMenu(action) {\n  const { params } = action;\n  const formData = new FormData();\n  Object.keys(params).forEach((key) => {\n    if (params[key] === '') return;\n    formData.append(key, params[key]);\n  })\n  const options = {\n    method: 'POST',\n    body: formData,\n  }\n  const result = yield call(fetchData, { url: '/user/getMenuList', options });\n  if (result) {\n    yield put(loadMenuSuccess(result));\n  }\n}\nexport function* handleUpdateMenu(action) {\n  const { params } = action;\n  const formData = new FormData();\n  Object.keys(params).forEach((key) => {\n    if (params[key] === '') return;\n    formData.append(key, params[key]);\n  })\n  const options = {\n    method: 'POST',\n    body: formData,\n  }\n  const result = yield call(fetchData, { url: '/user/updateMenu', options });\n  if (result) {\n    yield put(modalVisibleToggle(false)); // 清空)\n    yield put(loadMenu({ menu_ids: 'all' }));\n    yield put(loadUserInfo());\n  }\n}\nexport function* watcher() {\n  yield takeLatest(ADD_MENU, handleAddMenu)\n  yield takeLatest(LOAD_MENU, handleLoadMenu)\n  yield takeLatest(UPDATE_MENU, handleUpdateMenu)\n}\n\nexport default [\n  watcher,\n];\n","export const ADD_MENU = '/Permission/Menu/ADD_MENU';\nexport const ADD_MENU_SUCCESS = '/Permission/Menu/ADD_MENU_SUCCESS';\n\nexport const LOAD_MENU = '/Permission/Menu/LOAD_MENU';\nexport const LOAD_MENU_SUCCESS = '/Permission/Menu/LOAD_MENU_SUCCESS';\n\nexport const ADD = '/Permission/Menu/ADD';\n\nexport const FIELDS_CHANGE = '/Permission/Menu/FIELDS_CHANGE';\n\nexport const MODAL_VISIBLE_TOGGLE = '/Permission/Menu/MODAL_VISIBLE_TOGGLE';\n\nexport const UPDATE_MENU = '/Permission/Menu/UPDATE_MENU';\n\nexport function add(params) {\n  return {\n    type: ADD,\n    params,\n  };\n}\n\nexport function addMenu(params) {\n  return {\n    type: ADD_MENU,\n    params,\n  };\n}\n\nexport function addMenuSuccess(data) {\n  return {\n    type: ADD_MENU_SUCCESS,\n    data,\n  };\n}\n\nexport function loadMenu(params) {\n  return {\n    type: LOAD_MENU,\n    params,\n  };\n}\n\nexport function loadMenuSuccess(data) {\n  return {\n    type: LOAD_MENU_SUCCESS,\n    data,\n  };\n}\n\nexport function fieldsChange(fields, editId) {\n  return {\n    type: FIELDS_CHANGE,\n    fields,\n    editId,\n  }\n}\n\nexport function modalVisibleToggle(bool, editId) {\n  return {\n    type: MODAL_VISIBLE_TOGGLE,\n    bool,\n    editId,\n  }\n}\n\nexport function updateMenu(params) {\n  return {\n    type: UPDATE_MENU,\n    params,\n  }\n}\n\n"],"sourceRoot":""}