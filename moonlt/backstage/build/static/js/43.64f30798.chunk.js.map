{"version":3,"sources":["containers/Pages/Draft/Add/sagas.js","containers/Pages/Draft/Add/actions.js"],"names":["handleLoadCategory","handleLoadForum","handlePublishDraft","watcher","history","createBrowserHistory","action","formData","options","result","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","FormData","method","body","call","fetchData","url","sent","put","loadCategorySuccess","stop","_marked","cid","_context2","params","abrupt","append","loadForumSuccess","_marked2","_context3","Object","keys","forEach","key","goBack","_marked3","_context4","takeLatest","LOAD_CATEGORY","LOAD_FORUM","PUBLISH_DRAFT","_marked4","__webpack_exports__","__webpack_require__","r","d","LOAD_CATEGORY_SUCCESS","LOAD_FORUM_SUCCESS","FIELDS_CHANGE","loadCategory","loadForum","fieldsChange","publishDraft","type","data","fields"],"mappings":"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","file":"static/js/43.64f30798.chunk.js","sourcesContent":["import { call, put, takeLatest } from 'redux-saga/effects';\nimport fetchData from '@/containers/App/sagas/fetchData';\nimport { LOAD_CATEGORY, loadCategorySuccess, LOAD_FORUM, loadForumSuccess, PUBLISH_DRAFT, fieldsChange } from './actions';\nimport { createBrowserHistory } from 'history';\nconst history = createBrowserHistory();\nexport function* handleLoadCategory(action) {\n  const formData = new FormData();\n  const options = {\n    method: 'POST',\n    body: formData,\n  }\n  const result = yield call(fetchData, { url: '/content/getCategory', options });\n  if (result) {\n    yield put(loadCategorySuccess(result));\n  }\n}\nexport function* handleLoadForum(action) {\n  const { cid } = action.params;\n  if (!cid) return;\n  const formData = new FormData();\n  formData.append('cid', cid);\n  const options = {\n    method: 'POST',\n    body: formData,\n  }\n  const result = yield call(fetchData, { url: '/content/getForum', options });\n  if (result) {\n    yield put(loadForumSuccess(result));\n  }\n}\nexport function* handlePublishDraft(action) {\n  const { params } = action;\n  const formData = new FormData();\n  Object.keys(params).forEach((key) => {\n    if (params[key]) formData.append(key, params[key]);\n  })\n  const options = {\n    method: 'POST',\n    body: formData,\n  }\n  const result = yield call(fetchData, { url: '/content/publishDraft', options });\n  if (result) {\n    history.goBack();\n  }\n}\nexport function* watcher() {\n  yield takeLatest(LOAD_CATEGORY, handleLoadCategory)\n  yield takeLatest(LOAD_FORUM, handleLoadForum)\n  yield takeLatest(PUBLISH_DRAFT, handlePublishDraft)\n}\n\nexport default [\n  watcher,\n];\n","export const LOAD_CATEGORY = '/Draft/Add/LOAD_CATEGORY';\nexport const LOAD_CATEGORY_SUCCESS = '/Draft/Add/LOAD_CATEGORY_SUCCESS';\n\nexport const LOAD_FORUM = '/Draft/Add/LOAD_FORUM';\nexport const LOAD_FORUM_SUCCESS = '/Draft/Add/LOAD_FORUM_SUCCESS';\n\nexport const FIELDS_CHANGE = '/Draft/Add/FIELDS_CHANGE';\n\nexport const PUBLISH_DRAFT = '/Draft/Add/PUBLISH_DRAFT';\n\nexport function loadCategory(params) {\n  return {\n    type: LOAD_CATEGORY,\n  };\n}\n\nexport function loadCategorySuccess(data) {\n  return {\n    type: LOAD_CATEGORY_SUCCESS,\n    data,\n  };\n}\n\nexport function loadForum(params) {\n  return {\n    type: LOAD_FORUM,\n    params,\n  };\n}\n\nexport function loadForumSuccess(data) {\n  return {\n    type: LOAD_FORUM_SUCCESS,\n    data,\n  };\n}\n\nexport function fieldsChange(fields) {\n  return {\n    type: FIELDS_CHANGE,\n    fields,\n  }\n}\n\nexport function publishDraft(params) {\n  return {\n    type: PUBLISH_DRAFT,\n    params,\n  }\n}"],"sourceRoot":""}