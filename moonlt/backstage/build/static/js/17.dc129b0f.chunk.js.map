{"version":3,"sources":["containers/Pages/Manage/Forum/List/actions.js","containers/Pages/Manage/Forum/List/selectors.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","utils/tools.js","containers/Pages/Manage/Forum/List/index.js"],"names":["__webpack_require__","r","__webpack_exports__","d","LOAD_FORUMLIST","LOAD_FORUMLIST_SUCCESS","ADD","FIELDS_CHANGE","MODAL_VISIBLE_TOGGLE","UPDATE_CATEGORY","add","loadForumList","loadForumListSuccess","fieldsChange","modalVisibleToggle","updateCategory","params","type","data","fields","editCid","bool","selectForumList","selectPage","selectTotal","reselect__WEBPACK_IMPORTED_MODULE_0__","selectForumDomain","state","get","createSelector","subState","forumList","page","total","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","self","call","assertThisInitialized","_setPrototypeOf","p","_inherits","subClass","superClass","create","value","_assertThisInitialized","ReferenceError","countNum","isNumber","str","count","re","len","test","c","charCodeAt","List","_this","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_super","handleUpdateCategory","formRef","current","validateFields","then","values","cid","keys","forEach","addCategory","toggleModalVisible","resetFields","handleFilesChange","timer","clearTimeout","tTimer","setTimeout","setState","handleEditCategory","finalFields","push","name","handleAddChildCategory","pid","React","createRef","editId","_this2","console","log","columns","getFieldValue","title","dataIndex","render","t","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","moment","format","record","_components_Style__WEBPACK_IMPORTED_MODULE_12__","antd__WEBPACK_IMPORTED_MODULE_10__","onClick","react_router_dom__WEBPACK_IMPORTED_MODULE_9__","to","concat","style","padding","className","pathname","fid","antd__WEBPACK_IMPORTED_MODULE_11__","size","dataSource","pagination","rowKey","Component","connect","dispatch","bindActionCreators","_Users_yangpu_bt_notes_moonlt_backstage_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__","actions"],"mappings":"iGAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,mCAAAE,IAAAJ,EAAAG,EAAAD,EAAA,2CAAAG,IAAAL,EAAAG,EAAAD,EAAA,wBAAAI,IAAAN,EAAAG,EAAAD,EAAA,kCAAAK,IAAAP,EAAAG,EAAAD,EAAA,yCAAAM,IAAAR,EAAAG,EAAAD,EAAA,oCAAAO,IAAAT,EAAAG,EAAAD,EAAA,wBAAAQ,IAAAV,EAAAG,EAAAD,EAAA,kCAAAS,IAAAX,EAAAG,EAAAD,EAAA,yCAAAU,IAAAZ,EAAAG,EAAAD,EAAA,iCAAAW,IAAAb,EAAAG,EAAAD,EAAA,uCAAAY,IAAAd,EAAAG,EAAAD,EAAA,mCAAAa,IAAO,IAAMX,EAAiB,oCACjBC,EAAyB,4CAEzBC,EAAM,4BAENC,EAAgB,sCAEhBC,EAAuB,6CAEvBC,EAAkB,wCAExB,SAASC,EAAIM,GAClB,MAAO,CACLC,KAAMX,EACNU,UAIG,SAASL,EAAcK,GAC5B,MAAO,CACLC,KAAMb,EACNY,UAIG,SAASJ,EAAqBM,GACnC,MAAO,CACLD,KAAMZ,EACNa,QAIG,SAASL,EAAaM,EAAQC,GACnC,MAAO,CACLH,KAAMV,EACNY,SACAC,WAIG,SAASN,EAAmBO,EAAMD,GACvC,MAAO,CACLH,KAAMT,EACNa,OACAD,WAIG,SAASL,EAAeC,GAC7B,MAAO,CACLC,KAAMR,EACNO,6CCnDJhB,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,oCAAAoB,IAAAtB,EAAAG,EAAAD,EAAA,+BAAAqB,IAAAvB,EAAAG,EAAAD,EAAA,gCAAAsB,IAAA,IAAAC,EAAAzB,EAAA,IAEM0B,EAAoB,SAAAC,GAAK,OAAIA,EAAMC,IAAI,sBACvCN,EAAkBO,YACtBH,EACA,SAACI,GAAD,OAAcA,GAAYA,EAASC,YAE/BR,EAAaM,YACjBH,EACA,SAACI,GAAD,OAAcA,GAAYA,EAASE,OAE/BR,EAAcK,YAClBH,EACA,SAACI,GAAD,OAAcA,GAAYA,EAASG,0CCbtB,SAAAC,EAAAC,EAAAC,GACf,KAAAD,aAAAC,GACA,UAAAC,UAAA,qCAFArC,EAAAG,EAAAD,EAAA,sBAAAgC,sCCAA,SAAAI,EAAAC,EAAAC,GACA,QAAAC,EAAA,EAAiBA,EAAAD,EAAAE,OAAkBD,IAAA,CACnC,IAAAE,EAAAH,EAAAC,GACAE,EAAAC,WAAAD,EAAAC,aAAA,EACAD,EAAAE,cAAA,EACA,UAAAF,MAAAG,UAAA,GACAC,OAAAC,eAAAT,EAAAI,EAAAM,IAAAN,IAIe,SAAAO,EAAAd,EAAAe,EAAAC,GAGf,OAFAD,GAAAb,EAAAF,EAAAiB,UAAAF,GACAC,GAAAd,EAAAF,EAAAgB,GACAhB,EAbApC,EAAAG,EAAAD,EAAA,sBAAAgD,sCCAe,SAAAI,EAAAC,GAIf,OAHAD,EAAAP,OAAAS,eAAAT,OAAAU,eAAA,SAAAF,GACA,OAAAA,EAAAG,WAAAX,OAAAU,eAAAF,KAEAA,GAJAvD,EAAAG,EAAAD,EAAA,sBAAAoD,sCCAe,SAAAK,EAAAC,GAaf,OATAD,EADA,oBAAAE,QAAA,kBAAAA,OAAAC,SACA,SAAAF,GACA,cAAAA,GAGA,SAAAA,GACA,OAAAA,GAAA,oBAAAC,QAAAD,EAAAG,cAAAF,QAAAD,IAAAC,OAAAR,UAAA,gBAAAO,IAIAA,gBCXe,SAAAI,EAAAC,EAAAC,GACf,OAAAA,GAAsB,WAAPP,EAAOO,IAAA,oBAAAA,EAIbnB,OAAAoB,EAAA,EAAApB,CAAqBkB,GAH9BC,EAJAlE,EAAAG,EAAAD,EAAA,sBAAA8D,sCCAe,SAAAI,EAAAb,EAAAc,GAMf,OALAD,EAAArB,OAAAS,gBAAA,SAAAD,EAAAc,GAEA,OADAd,EAAAG,UAAAW,EACAd,IAGAA,EAAAc,GCLe,SAAAC,EAAAC,EAAAC,GACf,uBAAAA,GAAA,OAAAA,EACA,UAAAnC,UAAA,sDAGAkC,EAAAlB,UAAAN,OAAA0B,OAAAD,KAAAnB,UAAA,CACAU,YAAA,CACAW,MAAAH,EACAzB,UAAA,EACAD,cAAA,KAGA2B,GAAkBJ,EAAcG,EAAAC,GAbhCxE,EAAAG,EAAAD,EAAA,sBAAAoE,sCCAe,SAAAK,EAAAV,GACf,YAAAA,EACA,UAAAW,eAAA,6DAGA,OAAAX,EALAjE,EAAAG,EAAAD,EAAA,sBAAAyE,sCCAA3E,EAAAG,EAAAD,EAAA,sBAAA2E,IAAA7E,EAAAG,EAAAD,EAAA,sBAAA4E,IAGO,IAAMD,EAAW,SAACE,GACvB,IAAIC,EAAQ,EACNC,EAAK,kBAKX,GAAIF,EACF,IAAK,IAAItC,EAAI,EAAGyC,EAAMH,EAAIrC,OAAQD,EAAIyC,EAAKzC,GAAK,EAC9C,GAAIwC,EAAGE,KAAKJ,EAAItC,IACduC,GAAS,MACJ,CACL,IAAMI,GAAKL,EAAIM,WAAW5C,GAExBuC,GADEI,EAAI,IACG,GAXH,OAYaA,GAAOA,GAXpB,MAYG,GAXH,OAYaA,GAAOA,GAXpB,MAYG,GAEA,EAIjB,OAAOJ,GAKIF,EAAW,SAACC,GAGvB,SAFe,gBAEJI,KAAKJ,KADD,qFACgBI,KAAKJ,ipBCzBhCO,0CACJ,SAAAA,EAAY9C,GAAO,IAAA+C,EAAA,OAAAxC,OAAAyC,EAAA,EAAAzC,CAAA0C,KAAAH,IACjBC,EAAAG,EAAAxB,KAAAuB,KAAMjD,IAURmD,qBAAuB,WAAM,IACnBvE,EAAYmE,EAAK/C,MAAjBpB,QACJA,EACFmE,EAAK5D,MAAMiE,QAAQC,QAAQC,iBAAiBC,KAAK,SAAAC,GAC/C,IAAMhF,EAAS,CAAEiF,IAAK7E,GACtB2B,OAAOmD,KAAKF,GAAQG,QAAQ,SAAClD,GAC3BjC,EAAOiC,GAAO+C,EAAO/C,KAEvBsC,EAAK/C,MAAMzB,eAAeC,KAG5BuE,EAAK5D,MAAMiE,QAAQC,QAAQC,iBAAiBC,KAAK,SAAAC,GAC/C,IAAMhF,EAAS,GACf+B,OAAOmD,KAAKF,GAAQG,QAAQ,SAAClD,GAC3BjC,EAAOiC,GAAO+C,EAAO/C,KAEvBsC,EAAK/C,MAAM4D,YAAYpF,MA3BVuE,EAgCnBc,mBAAqB,SAAChF,GACfA,IACHkE,EAAK5D,MAAMiE,QAAQC,QAAQS,cAC3Bf,EAAK/C,MAAM3B,aAAa,KAE1B0E,EAAK/C,MAAM1B,mBAAmBO,IArCbkE,EAuCnBgB,kBAAoB,SAACP,GACfT,EAAK5D,MAAM6E,OAAOC,aAAalB,EAAK5D,MAAM6E,OAC9C,IAAME,EAASC,WAAW,WACxBpB,EAAK/C,MAAM3B,aAAamF,GACxBT,EAAKqB,SAAS,CACZJ,MAAO,MAER,KACHjB,EAAKqB,SAAS,CACZJ,MAAOE,KAhDQnB,EAmDnBsB,mBAAqB,SAAC1F,GACpB,IAAM2F,EAAc,GACpB/D,OAAOmD,KAAK/E,GAAQgF,QAAQ,SAAClD,GACf,QAARA,GACF6D,EAAYC,KAAK,CAAEC,KAAM,CAAC/D,GAAMyB,MAAOvD,EAAO8B,OAGlDsC,EAAK/C,MAAM3B,aAAaiG,EAAa3F,EAAO8E,KAC5CV,EAAKc,oBAAmB,IA3DPd,EA6DnB0B,uBAAyB,SAACC,GACxB,IAAMJ,EAAc,CAAC,CAAEE,KAAM,CAAC,OAAQtC,MAAOwC,IAC7C3B,EAAK/C,MAAM3B,aAAaiG,GACxBvB,EAAKc,oBAAmB,IA9DxBd,EAAK5D,MAAQ,CACXiE,QAASuB,IAAMC,YACfZ,MAAO,GACPa,OAAQ,IALO9B,mEASjBE,KAAKjD,MAAM7B,cAAc,qCAyDlB,IAAA2G,EAAA7B,KACC1D,EAAc0D,KAAKjD,MAAnBT,UACRwF,QAAQC,IAAIzF,GAFL,IAGC6D,EAAYH,KAAK9D,MAAjBiE,QAEF6B,GADQ7B,GAAWA,EAAQC,SAAWD,EAAQC,QAAQ6B,cAAc,SAC1D,CAAC,CACfC,MAAO,kBACPC,UAAW,MACX3E,IAAK,OACJ,CACD0E,MAAO,2BACPC,UAAW,OACX3E,IAAK,QACJ,CACD0E,MAAO,2BACPC,UAAW,gBACX3E,IAAK,iBACJ,CACD0E,MAAO,2BACPC,UAAW,UACX3E,IAAK,WACJ,CACD0E,MAAO,2BACPC,UAAW,aACX3E,IAAK,cACJ,CACD0E,MAAO,2BACPC,UAAW,cACX3E,IAAK,cACL4E,OAAQ,SAACC,GAAD,OAAOC,EAAAC,EAAAC,cAAA,YAAQH,EAAII,IAAOJ,GAAGK,OAAO,uBAAyB,QACpE,CACDR,MAAO,eACP1E,IAAK,UACL4E,OAAQ,SAACC,EAAGM,GAAJ,OACNL,EAAAC,EAAAC,cAACI,EAAA,EAAD,KACEN,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAQrH,KAAK,OAAOsH,QAAS,kBAAMjB,EAAKT,mBAAmBuB,KAA3D,gBACAL,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAMC,GAAE,2BAAAC,OAA6BN,EAAOnC,KAAO0C,MAAO,CAAEC,QAAS,aAArE,gBACe,EAAbR,EAAOlB,MAAY,GAAKa,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAQrH,KAAK,OAAOsH,QAAS,kBAAMjB,EAAKL,uBAAuBmB,EAAOnC,OAAtE,uCAQhC,OACE8B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACI,EAAA,EAAD,KACEN,EAAAC,EAAAC,cAAA,OAAKY,UAAU,eACfd,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAMC,GAAI,CAAEK,SAAU,oBAAqBnH,MAAO,CAAEoH,IAAK,SACvDhB,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAQrH,KAAK,UAAU4H,UAAU,SAAjC,8BAGJd,EAAAC,EAAAC,cAACI,EAAA,EAAD,KACEN,EAAAC,EAAAC,cAACe,EAAA,EAAD,CAAOvB,QAASA,EAASwB,KAAK,SAASC,WAAYnH,EAAWoH,YAAY,EAAOC,OAAO,iBA1H/EC,aAmLJC,4BARS,SAAC3H,GACvB,MAAO,CACLI,UAAWT,0BAAgBK,GAC3BK,KAAMT,qBAAWI,GACjBM,MAAOT,sBAAYG,KAGG,SAAC4H,GAAD,OAAcC,6BAAmBzG,OAAA0G,EAAA,EAAA1G,CAAA,GAAK2G,GAAWH,IAC5DD,CAA4ChE","file":"static/js/17.dc129b0f.chunk.js","sourcesContent":["export const LOAD_FORUMLIST = '/Manage/Forum/List/LOAD_FORUMLIST';\nexport const LOAD_FORUMLIST_SUCCESS = '/Manage/Forum/List/LOAD_FORUMLIST_SUCCESS';\n\nexport const ADD = '/Manage/Category/List/ADD';\n\nexport const FIELDS_CHANGE = '/Manage/Category/List/FIELDS_CHANGE';\n\nexport const MODAL_VISIBLE_TOGGLE = '/Manage/Category/List/MODAL_VISIBLE_TOGGLE';\n\nexport const UPDATE_CATEGORY = '/Manage/Category/List/UPDATE_CATEGORY';\n\nexport function add(params) {\n  return {\n    type: ADD,\n    params,\n  };\n}\n\nexport function loadForumList(params) {\n  return {\n    type: LOAD_FORUMLIST,\n    params\n  };\n}\n\nexport function loadForumListSuccess(data) {\n  return {\n    type: LOAD_FORUMLIST_SUCCESS,\n    data,\n  };\n}\n\nexport function fieldsChange(fields, editCid) {\n  return {\n    type: FIELDS_CHANGE,\n    fields,\n    editCid,\n  }\n}\n\nexport function modalVisibleToggle(bool, editCid) {\n  return {\n    type: MODAL_VISIBLE_TOGGLE,\n    bool,\n    editCid,\n  }\n}\n\nexport function updateCategory(params) {\n  return {\n    type: UPDATE_CATEGORY,\n    params,\n  }\n}\n\n","import { createSelector } from 'reselect';\n// state.get 是异步的\nconst selectForumDomain = state => state.get('Manage/Forum/List');\nconst selectForumList = createSelector(\n  selectForumDomain,\n  (subState) => subState && subState.forumList,\n)\nconst selectPage = createSelector(\n  selectForumDomain,\n  (subState) => subState && subState.page,\n)\nconst selectTotal = createSelector(\n  selectForumDomain,\n  (subState) => subState && subState.total,\n)\nexport {\n  selectForumList,\n  selectPage,\n  selectTotal,\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","/**\n * @param str {string} 要计算的字符串，全角为1，半角为0.5\n */\nexport const countNum = (str) => {\n  let count = 0;\n  const re = /[\\u4e00-\\u9fa5]/;\n  const uFF61 = 0xFF61;\n  const uFF9F = 0xFF9F;\n  const uFFE8 = 0xFFE8;\n  const uFFEE = 0xFFEE;\n  if (str) {\n    for (let i = 0, len = str.length; i < len; i += 1) {\n      if (re.test(str[i])) {\n        count += 1;\n      } else {\n        const c = +str.charCodeAt(i);\n        if (c < 256) {\n          count += 0.5;\n        } else if ((uFF61 <= c) && (c <= uFF9F)) {\n          count += 0.5;\n        } else if ((uFFE8 <= c) && (c <= uFFEE)) {\n          count += 0.5;\n        } else {\n          count += 1;\n        }\n      }\n    } }\n  return count;\n}\n/**\n * @param str {string} 要分析的字符串\n */\nexport const isNumber = (str) => {\n  const regPos = /^\\d+(\\.\\d+)?$/; //非负浮点数\n  const regNeg = /^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/; //负浮点数\n  if (regPos.test(str) || regNeg.test(str)) return true;\n  else return false;\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Link } from 'react-router-dom';\nimport { Table, Button, Modal, Form, Input } from 'antd';\nimport { Title, Wrapper, FloatWrapper, FormOperate} from '@/components/Style';\nimport * as actions from './actions';\nimport { selectForumList, selectTotal, selectPage } from './selectors';\nimport { countNum } from '@/utils/tools';\nimport moment from 'moment';\nclass List extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formRef: React.createRef(),\n      timer: '',\n      editId: '',\n    };\n  }\n  componentWillMount() {\n    this.props.loadForumList({});\n  }\n  handleUpdateCategory = () => {\n    const { editCid } = this.props;\n    if (editCid) { // 编辑\n      this.state.formRef.current.validateFields().then(values => {\n        const params = { cid: editCid };\n        Object.keys(values).forEach((key) => {\n          params[key] = values[key];\n        })\n        this.props.updateCategory(params);\n      })\n    } else { // 添加\n      this.state.formRef.current.validateFields().then(values => {\n        const params = {};\n        Object.keys(values).forEach((key) => {\n          params[key] = values[key];\n        })\n        this.props.addCategory(params);\n      })\n    }\n    \n  }\n  toggleModalVisible = (bool) => {\n    if (!bool) {\n      this.state.formRef.current.resetFields();\n      this.props.fieldsChange([]); // 清空\n    }\n    this.props.modalVisibleToggle(bool);\n  }\n  handleFilesChange = (values) => {\n    if (this.state.timer) clearTimeout(this.state.timer);\n    const tTimer = setTimeout(() => {\n      this.props.fieldsChange(values);\n      this.setState({\n        timer: '',\n      })\n    }, 200)\n    this.setState({\n      timer: tTimer\n    })\n  }\n  handleEditCategory = (fields) => {\n    const finalFields = [];\n    Object.keys(fields).forEach((key) => {\n      if (key !== 'cid') {\n        finalFields.push({ name: [key], value: fields[key] });\n      }\n    })\n    this.props.fieldsChange(finalFields, fields.cid);\n    this.toggleModalVisible(true);\n  }\n  handleAddChildCategory = (pid) => {\n    const finalFields = [{ name: ['pid'], value: pid }];\n    this.props.fieldsChange(finalFields);\n    this.toggleModalVisible(true);\n  }\n  render() {\n    const { forumList } = this.props;\n    console.log(forumList);\n    const { formRef } = this.state;\n    const label = formRef && formRef.current && formRef.current.getFieldValue('label') || '';\n    const columns = [{\n      title: '板块fid',\n      dataIndex: 'fid',\n      key: 'fid',\n    }, {\n      title: '板块名称',\n      dataIndex: 'name',\n      key: 'name',\n    }, {\n      title: '所属类目',\n      dataIndex: 'category_name',\n      key: 'category_name',\n    }, {\n      title: '关注人数',\n      dataIndex: 'members',\n      key: 'members',\n    }, {\n      title: '文章总数',\n      dataIndex: 'news_count',\n      key: 'news_count',\n    }, {\n      title: '创建时间',\n      dataIndex: 'create_time',\n      key: 'create_time',\n      render: (t) => <span>{ t ? moment(t).format('YYYY-MM-DD HH:mm:ss') : '--' }</span>\n    }, {\n      title: '操作',\n      key: 'operate',\n      render: (t, record) => (\n        <FormOperate>\n          <Button type=\"link\" onClick={() => this.handleEditCategory(record)}>编辑</Button>\n          <Link to={`/manage/category/detail/${record.cid}`} style={{ padding: '4px 15px' }}>详情</Link>\n          { record.pid * 1 === 0 && <Button type=\"link\" onClick={() => this.handleAddChildCategory(record.cid)}>添加子类目</Button>}\n        </FormOperate>\n      )\n    }];\n    const layout = {\n      labelCol: { span: 6 },\n      wrapperCol: { span: 16 },\n    }; \n    return (\n      <div>\n        <Title>\n          <div className=\"borderLeft\"></div>\n          <h2>板块管理</h2>\n          <Link to={{ pathname: '/manage/forum/add', state: { fid: '123' } }}>\n            <Button type=\"primary\" className=\"btn-r\">添加板块</Button>\n          </Link>\n        </Title>\n        <Wrapper>\n          <Table columns={columns} size=\"middle\" dataSource={forumList} pagination={false} rowKey=\"cid\" />\n        </Wrapper>\n        {/* <Modal\n          title={this.props.editCid ? '编辑类目' : getTitle(fields)}\n          visible={modalVisible}\n          width={500}\n          onOk={() => this.handleUpdateCategory()}\n          onCancel={() => this.toggleModalVisible(false)}\n          okText={this.props.editCid ? '确定' : '添加'}\n          cancelText=\"取消\"\n          maskClosable={false}\n          forceRender\n        >\n          <Form\n            ref={formRef}\n            onFieldsChange={(_, all) => this.handleFilesChange(all)}\n            fields={(fields && fields.length) ? fields : []}\n            initialValues={[]}\n          >\n            <Form.Item\n              {...layout}\n              label=\"名称\"\n              name=\"name\"\n              rules={[{ required: true, message: '请输入类目名称' }]}\n            >\n              <Input addonAfter={<div style={{ width: '50px' }}>{countNum(label)}个字</div>} />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"key\"\n              name=\"path_key\"\n              rules={[{ required: true, message: '请输入唯一key值' }]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              {...layout}\n              label=\"pid\"\n              name=\"pid\"\n              style={{ display: 'none' }}\n            >\n              <Input />\n            </Form.Item>\n          </Form>\n        </Modal> */}\n      </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    forumList: selectForumList(state),\n    page: selectPage(state),\n    total: selectTotal(state),\n  };\n}\nconst mapActionsToProps = (dispatch) => bindActionCreators({ ...actions }, dispatch);\nexport default connect(mapStateToProps, mapActionsToProps)(List);\n"],"sourceRoot":""}