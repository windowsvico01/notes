{"version":3,"sources":["js/game_main.js"],"names":["Main","props","cid","teams","userList","playerList","gameState","id","name","socket","config","start","width","height","waitTime","container","state","status","cells","roomId","round","queue","cIndex","cPlayer","player","playing","num","list","me","initGameEnv","initPlayers","initTools","bindEvent","render","table","Table","init","Object","keys","forEach","key","uid","team","Player","roll","Roll","operateBox","$","append","renderState","console","log","startBtn","waitingBtn","html","_this","on","rollParams","action","emit","cb","teamPlayers","length","i","isRolling","times","point","rollTime","rollOnce","timer","setTimeout","tIndex","Math","random","tPoint","moveStep","clearTimeout","step","circle","curr","head","position","l","t","tPlayer","target","moveToNext","next","isRunning","isLast","animate","left","top","steps","tSteps","players","isHead","item","index","tPrev","prev","tP","getLocation","x","y","tC","Cell","renderCells","cell","toLeft","toRight","toTop","toBottom","type","size","w","h","center","style","color","price","cost","level","owner","cellHtml","Socket","username","url","location","href","nameSpace","room","io","path","query","msg","from","data","bindJoinRoom","bindReady","params","roomInfo","joinParams","gameParams","renderStart","tGameHtml","bindGameReady","readyParams","css","remove","bindGameStart","main","alert","bindRollEvents","find","each","el","e","show","hide","getMessages","empty","Api","post","res","err","code","tMessage","send_uid","send_name","send_time","window","scrollToLocation","submit","submitMsg","val","preventDefault","getUserInfo","token","getCookie","indexOf","host","tSocket"],"mappings":"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","sourcesContent":["class Main {  // 游戏主进程\n  constructor(props = {}) {\n    const { cid = 'rich', teams = [ 'pink', 'blue', 'red', 'green', 'black' ], userList = [], playerList = {}, gameState = {}, id, name, socket } = props;\n    this.config = { // 配置信息\n      playerList,\n      userList, // 用户信息\n      start: 'leftBottom',\n      width: 700,\n      height: 700,\n      waitTime: 10,\n      container: cid,\n      teams\n    }\n    this.socket = socket;\n    this.state = {     \n      status: {},\n      cells: [], // 所有格子\n      roomId: gameState.roomId,\n      round: gameState.round || 1, // 回合\n      queue: gameState.queue || [], // 玩家队列\n      cIndex: gameState.cIndex || 0, //当前队列index\n      cPlayer: gameState.cPlayer || null, // 当前玩家\n    }\n    this.player = { // 玩家信息\n      playing: null, // 当前玩家\n      num: 1, // 玩家数量 \n      list: {}, // 玩家对象列表\n    }\n    this.me = { // 自己的信息\n      id,\n      name,\n    }\n  }\n  init() {\n    this.initGameEnv();\n    this.initPlayers();\n    this.initTools();\n    // 绑定主进程事件\n    this.bindEvent();\n  }\n  initGameEnv() { // 初始化游戏环境\n    // 初始化游戏主进程\n    this.render();\n    // 初始化棋盘\n    this.state.table = new Table();\n    this.state.table.init();\n    this.state.table.render();\n  }\n  initPlayers() { // 初始化游戏玩家\n    const { userList, playerList } = this.config;\n    const { table } = this.state;\n    // 初始化玩家\n    Object.keys(playerList).forEach((key) => {\n      const { name, id, uid, team } = playerList[key].state;\n      this.player.list[id] = new Player({ id, uid, name, table, team });\n      // this.state.queue.push(id);\n      this.player.num += 1;\n      this.player.list[id].render();\n    })\n  }\n  initTools() { // 初始化游戏道具\n    // 初始化色子\n    this.state.roll = new Roll();\n    this.state.roll.init();\n  }\n  render() {\n    const operateBox = `<div id=\"operate\" class=\"operateBox\"></div>`;\n    $(`#${this.config.container}`).append(operateBox);\n    this.renderState();\n  }\n  renderState() {\n    console.log(this.state.cPlayer);\n    const startBtn = `<div id=\"startRoll\" class=\"btn btn-start\">${this.me.name}快跑</div>`;\n    const waitingBtn = `<div id=\"waitBtn\" class=\"btn btn-wait\">${this.state.cPlayer.name}正在跑</div>`;\n    if (this.me.id === this.state.cPlayer.id) {\n      $('#operate').html(startBtn);\n    } else {\n      $('#operate').html(waitingBtn);\n    }\n  }\n  bindEvent() {\n    const _this = this;\n    $('#operate').on('click', '#startRoll', function() {\n      if (_this.me.id === _this.state.cPlayer.id) {\n        console.log(_this.me.name + '要滚动了');\n        const rollParams = {\n          action: 'start_roll',\n          id: _this.me.id,\n          name: _this.me.name,\n          roomId: _this.state.roomId,\n        };\n        console.log(_this.socket);\n        _this.socket.emit('startRoll', rollParams);\n      } else {\n        console.log('还没轮到' + _this.me.name)\n      }\n      // if (_this.player && _this.state.roll) {\n      //   if (_this.state.roll.state.isRolling) {\n      //     console.log('正在滚动');\n      //     return;\n      //   }\n      //   if (_this.state.table.state.isRunning) {\n      //     console.log('有人在跑');\n      //     return;\n      //   }\n      //   _this.state.roll.rollStart(_this.state.player);\n      // }\n    })\n  }\n  divide(cb) { // 分组\n    const { teams, teamPlayers } = this.config;\n    const { list, num } = this.player;\n    if (teamPlayers === 1) { // 一人一个小组\n      if (teams.length < num) return; // 分组配置不够\n      Object.keys(list).forEach((i) => {\n        keys[i].state.team = teams[i];\n      })\n    }\n    if (cb) cb();\n    // 后期再添加多人分组\n  }\n  // 开始回合\n  startGame() {\n    const { queue, cIndex, cPlayer } = this.state;\n    const { list } = this.player;\n    this.state.cPlayer = list[queue[cIndex]];\n  }\n  nextTurn() {\n    const { queue, cIndex } = this.state;\n    const { list } = this.player;\n    if (cIndex = queue.length - 1) { // 玩完一轮了\n      this.state.cIndex = 0;\n      this.state.round += 1;\n      this.state.cPlayer = list[queue[0]];\n    } else {\n      this.state.cPlayer = list[queue[cIndex + 1]];\n    }\n  }\n}\n\nclass Roll {\n  constructor(props = {}) {\n    this.state = {\n      container: 'rich',\n      isRolling: false,\n    }\n  }\n  init() {\n    const times = `<div class=\"step-box\">走 <span id=\"step-con\" style=\"color:red;font-size: 0.5rem;font-weight: blod\">0</span> 步</div>`;\n    $(`#${this.state.container}`).append(times);\n  }\n  render(num) {\n    $('#step-con').html(num);\n  }\n  rollStart(player) {\n    const point = [ 1, 2, 3, 4, 5, 6 ];\n    const rollTime = 20;\n    const rollOnce = (rollTime) => {\n      this.state.isRolling = true;\n      this.timer = setTimeout(() => {\n        const tIndex = Math.round(Math.random() * 5);\n        const tPoint = point[tIndex];\n        this.render(tPoint);\n        rollTime --;\n        if (rollTime) rollOnce(rollTime);\n        else {\n          this.state.isRolling = false;\n          player.moveStep(tPoint);\n          clearTimeout(this.timer);\n        }\n      }, 200)\n    }\n    rollOnce(rollTime)\n  }\n}\n\nclass Player {\n  constructor(props = {}) {\n    const { id, uid, table, name = '玩家1', team = 'blue' } = props;\n    this.state = {\n      table,\n      id,\n      team,\n      name,\n      step: 0, // 位置\n      circle: 0, // 圈数\n      curr: null,\n    }\n  }\n  init() {\n\n  }\n  render() {\n    const { container, head, cells } = this.state.table.state;\n    const { l, t } = cells[head].state.position;\n    const { id, team } = this.state;\n    const tPlayer = `<div\n    id=\"${id}\"\n    class=\"player\"\n    style=\"left:${l}rem;\n    top:${t}rem;\n    background:${team};\n    \"\n    >\n    ${this.state.name}\n    </div>`;\n    $(`#${container}`).append(tPlayer);\n    this.state.curr = head;\n  }\n  moveTo(target) {\n    const moveToNext = () => {\n      const { curr, table, id } = this.state;\n      const { cells } = table.state;\n      const next = cells[cells[curr].state.next];\n      const _this = this;\n      this.state.step += 1;\n      table.state.isRunning = true; // 有人在跑\n      if (next.state.isLast) {\n        this.state.step = 0.\n        this.state.circle += 1;\n      }\n      $(`#${id}`).animate({\n        left: `${next.state.position.l}rem`,\n        top: `${next.state.position.t}rem`,\n      }, 100, () => {\n        _this.state.curr = next.state.id;\n        if (_this.state.curr === target) { // 到达目标位置\n          table.state.isRunning = false; // 没人跑了\n          return;\n        }\n        moveToNext();\n      });\n    }\n    moveToNext();\n  }\n  moveStep(steps) {\n    let tSteps = 0;\n    const moveToNext = () => {\n      const { curr, table, id } = this.state;\n      const { cells } = table.state;\n      const next = cells[cells[curr].state.next];\n      const _this = this;\n      this.state.step += 1;\n      table.state.isRunning = true; // 有人在跑\n      if (next.state.isLast) {\n        this.state.step = 0.\n        this.state.circle += 1;\n      }\n      $(`#${id}`).animate({\n        left: `${next.state.position.l}rem`,\n        top: `${next.state.position.t}rem`,\n      }, 1000, () => {\n        tSteps += 1;\n        _this.state.curr = next.state.id;\n        if (tSteps === steps) { // 到达目标位置\n          table.state.isRunning = false; // 有人在跑\n          // console.log(next.state)\n          return;\n        }\n        moveToNext();\n      });\n    }\n    moveToNext();\n  }\n}\n\nclass Table { // 棋盘\n  constructor(props = {}) {\n    const { cid = 'rich' } = props;\n    this.state = {\n      start: 'leftBottom',\n      width: 700,\n      height: 700,\n      container: cid,\n      config: {},\n      status: {},\n      head: '1',\n      cells: {},\n      steps: 0,\n      players: [],\n      isRunning: false,\n    }\n  }\n  init() {\n    const cells = [ { width: 70, height: 70, id: '1', isHead: true },\n    { width: 70, height: 70, id: '2', isHead: false },\n    { width: 70, height: 70, id: '3', isHead: false },\n    { width: 70, height: 70, id: '4', isHead: false },\n    { width: 70, height: 70, id: '6', isHead: false },\n    { width: 70, height: 70, id: '7', isHead: false },\n    { width: 70, height: 70, id: '8', isHead: false },\n    { width: 70, height: 70, id: '9', isHead: false },\n    { width: 70, height: 70, id: '10', isHead: false },\n    { width: 70, height: 70, id: '11', isHead: false },\n    { width: 70, height: 70, id: '12', isHead: false },\n    { width: 70, height: 70, id: '13', isHead: false },\n    { width: 70, height: 70, id: '14', isHead: false },\n    { width: 70, height: 70, id: '15', isHead: false },\n    { width: 70, height: 70, id: '16', isHead: false },\n    { width: 70, height: 70, id: '17', isHead: false },\n    { width: 70, height: 70, id: '18', isHead: false },\n    { width: 70, height: 70, id: '19', isHead: false },\n    { width: 70, height: 70, id: '20', isHead: false },\n    { width: 70, height: 70, id: '21', isHead: false },\n    { width: 70, height: 70, id: '22', isHead: false },\n    { width: 70, height: 70, id: '23', isHead: false },\n    { width: 70, height: 70, id: '24', isHead: false },\n    { width: 70, height: 70, id: '25', isHead: false },\n    { width: 70, height: 70, id: '26', isHead: false },\n    { width: 70, height: 70, id: '27', isHead: false },\n    { width: 70, height: 70, id: '28', isHead: false },\n    { width: 70, height: 70, id: '29', isHead: false },\n    { width: 70, height: 70, id: '30', isHead: false },\n    { width: 70, height: 70, id: '31', isHead: false },\n    { width: 70, height: 70, id: '32', isHead: false },\n    { width: 70, height: 70, id: '33', isHead: false },\n    { width: 70, height: 70, id: '34', isHead: false },\n    { width: 70, height: 70, id: '35', isHead: false },\n    { width: 70, height: 70, id: '36', isHead: false },\n    { width: 70, height: 70, id: '37', isHead: false },\n    ];\n    this.state.steps = cells.length;\n    switch(this.state.start) {\n      case('leftBottom'):\n        cells[0].left = 0;\n        cells[0].top = this.state.height - cells[0].height;\n        break;\n      default:\n        cells[0].left = 0;\n        cells[0].top = this.state.height;\n        break;\n    }\n    cells.forEach((item, index) => {\n      if (index === 0) this.state.head = item.id;\n      if (index !== 0) {\n        const tPrev = cells[index - 1];\n        item.prev = tPrev.id;\n        // 设置位置\n        const tP = this.getLocation(tPrev, item);\n        item.left = tP.x;\n        item.top = tP.y;\n      }\n      if (cells[index + 1]) item.next = cells[index + 1].id;\n      else {\n        item.isLast = true;\n        item.next = this.state.head\n      }\n      const tC = new Cell(item);\n      this.state.cells[tC.state.id] = tC;\n    })\n  }\n  render() {\n    const { head, cells } = this.state;\n    if (!head) {\n      console.log('缺少开始棋格');\n      return;\n    }\n    const renderCells = (cell) => {\n      cell.render(this.state.container);\n      if (cell.state.next && !cell.state.isLast) {\n        renderCells(this.state.cells[cell.state.next]);\n      }\n    }\n    renderCells(this.state.cells[head]);\n    // this.state.cells.forEach((cell) => {\n    //   cell.render(this.state.container);\n    // });\n  }\n  getLocation(prev, curr) { // 边界判断后获取位置\n    const toLeft = prev.left - curr.width;\n    const toRight = this.state.width - prev.left - prev.width - curr.width;\n    const toTop = prev.top - curr.width;\n    const toBottom = this.state.height - prev.top - prev.height - curr.height;\n    if (toLeft < 0) { // 靠近左边界\n      if (toTop < 0) { // 在左上角\n        return { x: prev.left + curr.width, y: prev.top };\n      } else { // 左边界\n        return { x: prev.left, y: prev.top - curr.height };\n      }\n    } else {\n      if (toRight < 0) { // 靠近右边界\n        if (toBottom < 0) { // 右下角\n          return { x: prev.left - curr.width, y: prev.top };\n        } else { //  靠近右\n          return { x: prev.left, y: prev.top + curr.height };\n        }\n      } else {\n        if (toTop < 0) { // 上边界不靠近角\n          return { x: prev.left + curr.width, y: prev.top };\n        }\n        if (toBottom < 0) { // 下边界不靠近角\n          return { x: prev.left - curr.width, y: prev.top };\n        }\n      }\n    }\n  }\n\n}\n\nclass Cell { // 单个格子\n  constructor(props = {}) {\n    const {\n      id,\n      type = 'default',\n      width = 80,\n      height = 80,\n      left = 0,\n      top = 0,\n      isHead = false,\n      isLast = false,\n      next,\n    } = props;\n    this.state = {\n      id,\n      type, // 类型： 普通 功能 道具\n      size: {\n        w: width * 10 / 750,\n        h: height * 10 / 750,\n      },\n      position: {\n        center: { x: left, y: top },\n        l: left * 10 / 750,\n        t: top * 10 / 750,\n      },\n      isHead,\n      isLast,\n      prev: null,\n      next,\n      default: { // 普通类型格子\n        style: {\n          color: '',\n          class: 'normal'\n        },\n        price: 0, // 地块价格\n        cost: 0, // 路过支付\n        level: 1, // 等级\n        owner: '',\n      },\n    }\n  }\n  init () {\n\n  }\n  render (container) {\n    const cellHtml = `\n    <div\n      class=\"cell default\"\n      style=\"width:${this.state.size.w}rem;\n      height:${this.state.size.h}rem;\n      left:${this.state.position.l}rem;\n      top:${this.state.position.t}rem;\n      \"\n      id=\"${this.state.id}\"\n    >\n      <div class=\"inner\">${this.state.id}</div>\n    </div>`;\n    $(`#${container}`).append(cellHtml);\n  }\n  setColor() {\n\n  }\n}\n\n\nclass Socket {\n  constructor({ username, uid }) {\n    this.socket = '';\n    this.config = {\n      url: location.href,\n      nameSpace: '',\n      room: '',\n      roomId: '',\n      name: username || '',\n      uid: uid || '',\n    }\n  }\n  init() {\n    if (!this.config.name) {\n      console.log('用户名未输入');\n      return;\n    }\n    this.socket = io({\n      path: '/game',\n      query: {\n        name: this.config.name,\n        uid: this.config.uid,\n      }\n    });\n    this.socket && this.socket.on('send_from_server', function(msg, from, roomId){\n\n      if (roomId) { // 发送至房间\n        // let messageText = '';\n        // if (!from) {\n        //   alertMsg(msg, 'success');\n        // } else {\n        //   if (from.send_uid * 1 === _this.config.uid) messageText = `<div class=\"mine\"><div class=\"header\">${from.send_name}</div><span>${msg}</span></div>`;\n        //   else messageText = `<div><div class=\"header\">${from.send_name}</div><span>${msg}</span></div>`;\n        // }\n        // $('#messages').append(messageText);\n        // scrollToLocation($('#messages'), 'div');\n      } else { // 发送至大厅\n        // let messageText = '';\n        // if (!from) {\n        //   alertMsg(msg, 'success');\n        // } else {\n        //   if (from.send_uid * 1 === _this.config.uid) messageText = `<div class=\"mine\"><div class=\"header\">${from.send_name}</div><span>${msg}</span></div>`;\n        //   else messageText = `<div><div class=\"header\">${from.send_name}</div><span>${msg}</span></div>`;\n        // }\n        // $('#publicRes').append(messageText);\n        // scrollToLocation($('#publicRes'), 'div');\n      }\n    });\n    this.socket && this.socket.on('error', function (data) {\n      console.log(data || 'error');\n    });\n    this.bindJoinRoom();\n    this.bindReady();\n    // this.bindSelectRoom();\n    // this.bindLeaveRoom();\n    // this.bindSendMessage();\n    // this.getMessages(100000);\n  }\n  bindJoinRoom() {\n    this.socket && this.socket.on('join_room', (msg, params) => {\n      console.log('join_room')\n      const { roomInfo = {}, roomId, id, name } = params;\n      if (name === this.config.name) {\n        this.config.roomId = roomId;\n        this.config.room = roomInfo;\n        this.config.id = id;\n        const joinParams = { roomId, id, name };\n        this.socket.emit('joinRoom', joinParams);\n      }\n    })\n  }\n  bindReady() {\n    this.socket && this.socket.on('join_ready', (msg, params) => {\n      const { roomInfo = {}, roomId, id, name } = params;\n      if (this.config.roomId !== roomId) return;\n      const gameParams = {\n        userList: roomInfo.config.userList,\n        playerList: roomInfo.player.list,\n      }\n      this.renderStart(roomInfo.player.list);\n      // if (!this.main) {\n      //   this.main = new Main(gameParams);\n      //   this.main.init();\n      // }\n    })\n  }\n  renderStart(playerList) {\n    const { name, uid } = this.config;\n    console.log('我得名字：' + name);\n    let tGameHtml = '<div class=\"players-con\" id=\"player-con\">';\n    const _this = this;\n    Object.keys(playerList).forEach((key) => {\n      if (playerList[key].state.name === name) {\n        tGameHtml += `<p id=\"${playerList[key].state.id}\">${playerList[key].state.team}队：我</p>`;\n      } else {\n        tGameHtml += `<p id=\"${playerList[key].state.id}\">${playerList[key].state.team}队：${playerList[key].state.name}</p>`;\n      }\n    })\n    tGameHtml += '<div id=\"ready-btn\" class=\"btn ready\"> 准备 </div></div>';\n    $('body').append(tGameHtml);\n    this.bindGameReady();\n    $('body').on('click', '#ready-btn', function() {\n      console.log('click');\n      const readyParams = {\n        action: 'game_ready',\n        roomId: _this.config.roomId,\n        uid: _this.config.uid,\n        id: _this.config.id,\n        name: _this.config.name,\n      }\n      _this.socket.emit('gameReady', readyParams);\n    });\n  }\n  bindGameReady() {\n    this.socket && this.socket.on('game_ready', (msg, params) => {\n      console.log('game_ready')\n      const { roomInfo = {}, roomId, id, name } = params;\n      if (this.config.roomId !== roomId) return;\n      $(`#${id}`).css('color', 'green').append('已准备');\n      if (this.config.name === name) {\n        $('#ready-btn').remove();\n      } \n      this.bindGameStart();\n      // if (!this.main) {\n      //   this.main = new Main(gameParams);\n      //   this.main.init();\n      // }\n    })\n  }\n  bindGameStart() {\n    this.socket && this.socket.on('game_start', (msg, params) => {\n      if (!this.main) {\n        alert(msg);\n        console.log(params);\n        const gameParams = {\n          userList: params.roomInfo.config.userList,\n          playerList: params.roomInfo.player.list,\n          roomId: params.roomId,\n          gameState: params.gameState,\n          id: this.config.id,\n          name: this.config.name,\n          socket: this.socket,\n        }\n        this.main = new Main(gameParams);\n        this.main.init();\n        this.bindRollEvents();\n      }\n    })\n  }\n  bindRollEvents() {\n    this.socket && this.socket.on('send_steps', (params) => {\n      console.log('params');\n      const { id, steps } = params;\n      if (id === this.config.id) {\n        this.main.player.list[id].moveStep(steps);\n      }\n    })\n  }\n  bindSelectRoom() {\n    const _this = this;\n    $('#rooms').find('li').each(function(index, el){\n      $(el).on('click', function(e){\n        _this.config.room && _this.socket.emit('leaveRoom', _this.config.roomId);\n        _this.config.room = $(el).data('room');\n        _this.config.roomId = $(el).data('roomid');\n        $('#roomInfo').show();\n        $('#currentRoom').html(_this.config.room);\n        _this.socket.emit('joinRoom', _this.config.roomId);\n        $('#publicRes').hide();\n        $('#messages').show();\n        _this.getMessages(_this.config.roomId);\n      })\n    })\n  }\n  bindLeaveRoom() {\n    const _this = this;\n    $('#leaveBtn').on('click', () => {\n      if (!_this.config.roomId) return\n      _this.socket.emit('leaveRoom', _this.config.roomId, _this.config.uid);\n      $('#currentRoom').empty();\n      $('#roomInfo').hide();\n      $('#messages').hide();\n      $('#publicRes').show();\n      _this.getMessages(100000);\n      _this.config.room = '';\n      _this.config.roomId = '';\n    })\n  }\n  getMessages(roomId) {\n    const _this = this;\n    $('#messages').empty();\n    roomId === 100000 && $('#publicRes').find('div').remove();\n    Api.post('/api/getMessages', { roomId }, (res, err) => {\n      if (res.code === -1) {\n        console.log('获取信息失败');\n        return;\n      }\n      if (roomId === 100000) { // 大厅消息\n        res.data.length && res.data.forEach((item) => {\n          let tMessage = '';\n          if (_this.config.uid === item.send_uid) tMessage = `<div class=\"mine\"><div class=\"header\">${item.send_name}</div><span>${item.msg}( ${item.send_time} )</span></div>`;\n          else tMessage =  `<div><div class=\"header\">${item.send_name}</div><span>${item.msg}( ${item.send_time} )</span></div>`;\n          $('#publicRes').append(tMessage);\n        })\n        $('#publicRes').append(`<div class=\"public\"><span><--------↑↑ 历史消息 ↑↑-------></span></div>`);\n        $('#publicRes').height($(window).height() - 240);\n        scrollToLocation($('#publicRes'), 'div');\n      } else { // 房间消息\n        res.data.length && res.data.forEach((item) => {\n          let tMessage = '';\n          if (_this.config.uid === item.send_uid) tMessage = `<div class=\"mine\"><div class=\"header\">${item.send_name}</div><span>${item.msg}( ${item.send_time} )</span></div>`;\n          else tMessage =  `<div><div class=\"header\">${item.send_name}</div><span>${item.msg}( ${item.send_time} )</span></div>`;\n          $('#messages').append(tMessage);\n        })\n        $('#messages').append(`<div class=\"public\"><span><--------↑↑ 历史消息 ↑↑-------></span></div>`);\n        $('#messages').height($(window).height() - 240);\n        scrollToLocation($('#messages'), 'div');\n      }\n    })\n  }\n  bindSendMessage() {\n    const _this = this;\n    $('form').submit(function(e){\n      var submitMsg = $('#m').val();\n      if (!submitMsg) return;\n      e.preventDefault();\n      if (_this.config.room) _this.socket.emit('send_from_client', _this.config.room, _this.config.roomId, submitMsg);\n      else _this.socket.emit('send_from_client', '', '', submitMsg);\n      $('#m').val('');\n      return false;\n    });\n  }\n}\nconst getUserInfo = (cb) => {\n  Api.post('/api/getUserInfo', {token: getCookie('token')}, (res, err) => {\n    if ([-1, -2, -9].indexOf(res.code) !== -1) location.href = `${Api.host}/login.html`;\n    if (res.code === 0) cb(res.data);\n  })\n}\n$(function(){\n  // const params = {\n  //   userList: [ { id: '1111', name: '小杨' } ],\n  // }\n  \n  getUserInfo((data) => {\n    const tSocket = new Socket({ username: data.username, uid: data.uid });\n    tSocket.init();\n  })\n})\n\n"],"file":"game_main.js"}