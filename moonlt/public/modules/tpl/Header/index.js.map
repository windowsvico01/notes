{"version":3,"sources":["modules/tpl/Header/index.js"],"names":["getCookie","name","start","document","cookie","indexOf","len","length","substring","end","unescape","Header","dom","config","data","getUserInfo","res","tHtml","userInfo","html","afterInit","cb","$","post","token","err","code","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;AACA,IAAMA,SAAS,GAAG,SAAZA,SAAY,CAACC,IAAD,EAAU;AAC1B,MAAIC,KAAK,GAAGC,QAAQ,CAACC,MAAT,CAAgBC,OAAhB,CAAwBJ,IAAI,GAAG,GAA/B,CAAZ,CAD0B,CACuB;;AACjD,MAAIK,GAAG,GAAGJ,KAAK,GAAGD,IAAI,CAACM,MAAb,GAAsB,CAAhC,CAF0B,CAES;AACnC;;AACA,MAAK,CAACL,KAAF,IAAaD,IAAI,IAAIE,QAAQ,CAACC,MAAT,CAAgBI,SAAhB,CAA0B,CAA1B,EAA6BP,IAAI,CAACM,MAAlC,CAAzB,EAAqE;AACjE,WAAO,IAAP;AACH;;AACD,MAAIL,KAAK,IAAI,CAAC,CAAd,EAAiB,OAAO,IAAP,CAPS,CAOI;;AAC9B,MAAIO,GAAG,GAAGN,QAAQ,CAACC,MAAT,CAAgBC,OAAhB,CAAwB,GAAxB,EAA6BC,GAA7B,CAAV,CAR0B,CAQmB;;AAC7C,MAAIG,GAAG,IAAI,CAAC,CAAZ,EAAeA,GAAG,GAAGN,QAAQ,CAACC,MAAT,CAAgBG,MAAtB,CATW,CASmB;;AAC7C,SAAOG,QAAQ,CAACP,QAAQ,CAACC,MAAT,CAAgBI,SAAhB,CAA0BF,GAA1B,EAA+BG,GAA/B,CAAD,CAAf,CAV0B,CAU4B;AACvD,CAXD;;IAYME,M;AACJ,kBAAYC,GAAZ,EAAiB;AAAA;;AACf,SAAKC,MAAL,GAAc;AACVD,MAAAA,GAAG,EAAHA;AADU,KAAd;AAGD;;;;yBACIE,I,EAAM;AAAA;;AACT,WAAKC,WAAL,CAAiB,UAACC,GAAD,EAAQ;AACvB,YAAMC,KAAK,GAAG,yCAAWH,IAAX;AAAiBI,UAAAA,QAAQ,EAAEF;AAA3B,WAAd;;AACA,QAAA,KAAI,CAACH,MAAL,CAAYD,GAAZ,CAAgBO,IAAhB,CAAqBF,KAArB;;AACA,QAAA,KAAI,CAACG,SAAL;AACD,OAJD;AAKD;;;gCACWC,E,EAAI;AACdC,yBAAEC,IAAF,CAAO,kBAAP,EAA2B;AAACC,QAAAA,KAAK,EAAExB,SAAS,CAAC,OAAD;AAAjB,OAA3B,EAAwD,UAACgB,GAAD,EAAMS,GAAN,EAAc;AACpE,YAAI,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,EAAS,CAAC,CAAV,EAAapB,OAAb,CAAqBW,GAAG,CAACU,IAAzB,MAAmC,CAAC,CAAxC,EAA2CL,EAAE,CAAC,EAAD,CAAF;AAC3C,YAAIL,GAAG,CAACU,IAAJ,KAAa,CAAjB,EAAoBL,EAAE,CAACL,GAAG,CAACF,IAAL,CAAF;AACrB,OAHD;AAID;;;gCACW;AACVa,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD;;;;;;eAEYjB,M","sourcesContent":["import index from './index.art';\nimport './index.css';\nimport $ from 'jquery';\nconst getCookie = (name) => {\n  var start = document.cookie.indexOf(name + \"=\"); //得到cookie字符串中的名称\n  var len = start + name.length + 1; //得到从起始位置到结束cookie位置的长度\n  //如果起始没有值且name不存在于cookie字符串中，则返回null\n  if ((!start) && (name != document.cookie.substring(0, name.length))) {\n      return null;\n  }\n  if (start == -1) return null; //如果起始位置为-1也为null\n  var end = document.cookie.indexOf(';', len); //获取cookie尾部位置\n  if (end == -1) end = document.cookie.length; //计算cookie尾部长度\n  return unescape(document.cookie.substring(len, end)); //获取cookie值\n}\nclass Header {\n  constructor(dom) {\n    this.config = {\n        dom,\n    }\n  }\n  init(data) {\n    this.getUserInfo((res)=> {\n      const tHtml = index({ ...data, userInfo: res});\n      this.config.dom.html(tHtml);\n      this.afterInit();\n    })\n  }\n  getUserInfo(cb) {\n    $.post('/api/getUserInfo', {token: getCookie('token')}, (res, err) => {\n      if ([-1, -2, -9].indexOf(res.code) !== -1) cb('');\n      if (res.code === 0) cb(res.data);\n    })\n  }\n  afterInit() {\n    console.log('init');\n  }\n}\nexport default Header;"],"file":"index.js"}