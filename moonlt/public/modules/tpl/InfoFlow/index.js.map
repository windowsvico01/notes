{"version":3,"sources":["modules/tpl/InfoFlow/index.js"],"names":["InfoFlow","dom","state","current","limit","total","params","_ca","category","finalData","console","log","_this","getRootCategory","rootCategory","getCategoryList","caData","isRoot","is_root","activeCid","active_cid","activeKey","active_key","rootKey","root_key","getArticleData","cid","res","list","data","isHome","tHtml","html","afterInit","cb","$","post","err","key","pid"],"mappings":"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","sourcesContent":["import index from './index.art';\nimport './index.css';\nimport $ from 'jquery';\nclass InfoFlow {\n  constructor(dom) {\n    this.state = {\n      dom,\n      current: 1,\n      limit: 10,\n      total: 0,\n    }\n  }\n  /**\n   * @param {object} data require { type: 'default/plate', cid, plate_id, module_id } / data {}\n   */\n  init(params = {}) {\n    const { category : _ca } = params;\n    const finalData = {};\n    console.log(params);\n    const _this = this;\n    this.getRootCategory((rootCategory) => {\n      if (_ca) {  // 如果有类目key传入\n        _this.getCategoryList(_ca, (caData) => {\n          const { category, is_root: isRoot, active_cid: activeCid, active_key: activeKey, root_key: rootKey } = caData;\n          _this.getArticleData({...params, cid: activeCid}, (res) => {\n            finalData.list = res.data;\n            finalData.activeCid = activeCid;\n            finalData.category = category;\n            finalData.isRoot = isRoot;\n            finalData.isHome = false;\n            finalData.activeKey = activeKey;\n            finalData.rootKey = rootKey;\n            finalData.rootCategory = rootCategory;\n            const tHtml = index(finalData);\n            _this.state.dom.html(tHtml);\n            _this.afterInit();\n          })\n        })\n      } else {\n        _this.getArticleData({...params, cid: ''}, (res) => {\n          finalData.list = res.data;\n          finalData.isHome = true;\n          finalData.rootCategory = rootCategory;\n          console.log(rootCategory);\n          const tHtml = index(finalData);\n          _this.state.dom.html(tHtml);\n          _this.afterInit();\n        })\n      }\n    })\n  }\n  getArticleData(params, cb) {\n    $.post('/content/getDraftList', params, (res,err) => {\n      cb(res.data);\n    })\n  }\n  getCategoryList(category, cb) { // 获取类目列表\n    $.post('/content/getLevelCategory', { key: category }, (res,err) => {\n      cb(res.data);\n    })\n  }\n  getRootCategory(cb) {\n    $.post('/content/getCategory', { pid: '0' }, (res,err) => {\n      cb(res.data);\n    })\n  }\n  afterInit() {\n    console.log('init InfoFlow');\n  }\n}\nexport default InfoFlow;"],"file":"index.js"}